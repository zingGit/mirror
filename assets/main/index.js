window.__require=function e(t,o,n){function i(s,a){if(!o[s]){if(!t[s]){var c=s.split("/");if(c=c[c.length-1],!t[c]){var l="function"==typeof __require&&__require;if(!a&&l)return l(c,!0);if(r)return r(c,!0);throw new Error("Cannot find module '"+s+"'")}s=c}var u=o[s]={exports:{}};t[s][0].call(u.exports,function(e){return i(t[s][1][e]||e)},u,u.exports,e,t,o,n)}return o[s].exports}for(var r="function"==typeof __require&&__require,s=0;s<n.length;s++)i(n[s]);return i}({AES:[function(e,t,o){"use strict";cc._RF.push(t,"8943anY5uVCg73quCYTyAMC","AES"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){}return e.encrypt=function(e){var t=CryptoJS.enc.Utf8.parse(this.aes_key),o=CryptoJS.enc.Utf8.parse(this.aes_iv),n=CryptoJS.AES.encrypt(e,t,{iv:o,mode:CryptoJS.mode.CBC,padding:CryptoJS.pad.Pkcs7});return n=CryptoJS.format.OpenSSL.stringify(n)},e.decrypt=function(e){var t=(e=CryptoJS.format.OpenSSL.parse(e)).ciphertext.toString(),o=CryptoJS.enc.Hex.parse(t),n=CryptoJS.enc.Base64.stringify(o),i=CryptoJS.enc.Utf8.parse(this.aes_key),r=CryptoJS.enc.Utf8.parse(this.aes_iv);return CryptoJS.AES.decrypt(n,i,{iv:r,mode:CryptoJS.mode.CBC,padding:CryptoJS.pad.Pkcs7}).toString(CryptoJS.enc.Utf8)},e.aes_iv="GEqDJ9afpSi0wUCr",e.aes_key="FQgGprarat#b98FW",e}();o.default=n,cc._RF.pop()},{}],AFloat:[function(e,t,o){"use strict";cc._RF.push(t,"89dd3v4JvxAJZuh6HxIZZAn","AFloat");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,o,s):i(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,a=(r.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.start=function(){var e=this.node.getPosition(),t=e.x,o=e.y,n=5*Math.random();cc.tween(this.node).delay(n).repeatForever(cc.tween().to(3,{position:{value:cc.v2(t,o+10),easing:"sineOutIn"}}).to(3,{position:{value:cc.v2(t,o-10),easing:"sineOutIn"}})).start()},t=i([s],t)}(cc.Component));o.default=a,cc._RF.pop()},{}],ArchiveItem:[function(e,t,o){"use strict";cc._RF.push(t,"b4ced7X5fJNPqEZeXOfsvfx","ArchiveItem");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,o,s):i(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../utils/EventMgr"),s=cc._decorator,a=s.ccclass,c=s.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.labelCreateTime=null,t.nodeCreateGame=null,t.nodeDelect=null,t.archive=null,t}return n(t,e),t.prototype.init=function(e){var t=this;e?(this.nodeDelect.active=!0,this.nodeCreateGame.active=!1,this.labelCreateTime.string=e.createTime,this.node.getComponent(cc.Sprite).spriteFrame=this.archive.spfShow[this.itemId],this.node.once(cc.Node.EventType.TOUCH_START,function(){r.default.dispatchEvent("start_game",t.itemId),t.node.setScale(.98)},this)):(this.nodeDelect.active=!1,this.nodeCreateGame.active=!0,this.labelCreateTime.string="",this.node.getComponent(cc.Sprite).spriteFrame=this.archive.spfHide[this.itemId])},i([c(cc.Label)],t.prototype,"labelCreateTime",void 0),i([c(cc.Node)],t.prototype,"nodeCreateGame",void 0),i([c(cc.Node)],t.prototype,"nodeDelect",void 0),t=i([a],t)}(cc.Component);o.default=l,cc._RF.pop()},{"../utils/EventMgr":"EventMgr"}],Archive:[function(e,t,o){"use strict";cc._RF.push(t,"05d99KTK05IS5GpcJLg5Gf6","Archive");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,o,s):i(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../Game"),s=e("../utils/Data"),a=e("../utils/EventMgr"),c=e("../utils/SceneMgr"),l=e("../Base"),u=e("../utils/NodeHelp"),d=e("../Define"),p=cc._decorator,f=p.ccclass,h=p.property,y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nodeItem=[],t.spfShow=[],t.spfHide=[],t}return n(t,e),t.prototype.start=function(){this.updateView(),a.default.addEventListener("start_game",this.startGame,this)},t.prototype.updateView=function(){for(var e=s.getArchive(),t=0;t<e.length;t++){var o=this.nodeItem[t].getComponent("ArchiveItem");o.itemId=t,o.archive=this,o.init(e[t])}},t.prototype.createRole=function(){return{createTime:(new Date).Format("yyyy-MM-dd hh:mm:ss"),userScore:d.NEW_USER_SCORE,roleInfo:function(){for(var e=0,t=[];e<13;e++)t[e]={intimacy:0,combat:0,id:e,unlock:1==e};return t}()}},t.prototype.updateArchive=function(e,t){var o=Number(t),n=s.getArchive();n[o]=this.createRole(),console.warn("updateArchive: "+n),s.setArchive(n),r.Game.currentArchive=o,this.runHome()},t.prototype.clerArchive=function(e,t){var o=this,n=s.getSysHint(566);u.showConfir(n,!0).then(function(e){e.listenSure=function(){var e=Number(t),n=s.getArchive();n[e]=null,console.warn("clerArchive: "+n),s.setArchive(n),s.removeArchive(t),o.updateView()}})},t.prototype.runHome=function(){c.default.loadScene("home")},t.prototype.startGame=function(e){r.Game.currentArchive=e,a.default.removeEventListener("start_game"),this.runHome()},i([h([cc.Node])],t.prototype,"nodeItem",void 0),i([h([cc.SpriteFrame])],t.prototype,"spfShow",void 0),i([h([cc.SpriteFrame])],t.prototype,"spfHide",void 0),t=i([f],t)}(l.default);o.default=y,cc._RF.pop()},{"../Base":"Base","../Define":"Define","../Game":"Game","../utils/Data":"Data","../utils/EventMgr":"EventMgr","../utils/NodeHelp":"NodeHelp","../utils/SceneMgr":"SceneMgr"}],Base:[function(e,t,o){"use strict";cc._RF.push(t,"122d6of5LJK0JnLk3gYLXnW","Base");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,o,s):i(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,a=(r.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.onButtonExit=function(){this.node.removeFromParent()},t.prototype.removeSelf=function(){this.node.removeFromParent()},t=i([s],t)}(cc.Component));o.default=a,cc._RF.pop()},{}],Config:[function(e,t,o){"use strict";cc._RF.push(t,"cc31a72qgpGeo+dsfj0MB8Z","Config"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){}return e.load=function(){var e=this;if(!this.allConfig){var t=["Sys_Ability","Sys_Abyss","Sys_Album","Sys_Animation","Sys_Buff","Sys_Effect","Sys_Enemy","Sys_GirlSm","Sys_Guide","Sys_Item","Sys_Localization","Sys_Makelove","Sys_Npc","Sys_Player","Sys_Scene","Sys_Shop","Sys_Star","Sys_Story","Sys_Update","Sys_Zshop"];cc.resources.loadDir("config",function(o,n){if(o)return console.warn("Configuration loading failed");n.sort(function(e,o){return t.indexOf(e._name)-t.indexOf(o._name)}),e.allConfig=n,e.Sys_Ability=n[0].json,e.Sys_Abyss=n[1].json,e.Sys_Album=n[2].json,e.Sys_Animation=n[3].json,e.Sys_Buff=n[4].json,e.Sys_Effect=n[5].json,e.Sys_Enemy=n[6].json,e.Sys_GirlSm=n[7].json,e.Sys_Guide=n[8].json,e.Sys_Item=n[9].json,e.Sys_Localization=n[10].json,e.Sys_Makelove=n[11].json,e.Sys_Npc=n[12].json,e.Sys_Player=n[13].json,e.Sys_Scene=n[14].json,e.Sys_Shop=n[15].json,e.Sys_Star=n[16].json,e.Sys_Story=n[17].json,e.Sys_Update=n[18].json,e.Sys_Zshop=n[19].json})}},e.Sys_Ability=null,e.Sys_Abyss=null,e.Sys_Album=null,e.Sys_Animation=null,e.Sys_Buff=null,e.Sys_Effect=null,e.Sys_Enemy=null,e.Sys_GirlSm=null,e.Sys_Guide=null,e.Sys_Item=null,e.Sys_Localization=null,e.Sys_Makelove=null,e.Sys_Npc=null,e.Sys_Player=null,e.Sys_Scene=null,e.Sys_Shop=null,e.Sys_Star=null,e.Sys_Story=null,e.Sys_Update=null,e.Sys_Zshop=null,e.allConfig=null,e}();o.default=n,cc._RF.pop()},{}],Data:[function(e,t,o){"use strict";cc._RF.push(t,"cc50e0/KHNDo4bMevEu9dsc","Data"),Object.defineProperty(o,"__esModule",{value:!0}),o.getOption=o.getSysHint=o.getRoleAbilityIcon=o.getRuleCg=o.getItemSkills=o.getUnclockCoin=o.getUnclockCount=o.addUnclockCount=o.getLanguage=o.setLanguage=o.Skill=o.readAllLocalData=o.getAllRoleInfo=o.getRoleInfo=o.removeArchive=o.unlockRole=o.updateCombatPgs=o.updateIntimacy=o.updateUserScore=o.getArchiveUserScore=o.getArchiveInfo=o.setArchive=o.getArchive=void 0;var n=e("../commom/Sys_skillclassify"),i=e("../Config"),r=e("../Game"),s=e("../I18n"),a=e("./NodeHelp"),c=e("./AES");function l(){var e=cc.sys.localStorage.getItem("archive"),t=e&&c.default.decrypt(e);return t&&JSON.parse(t).data||new Array(4)}function u(e){return cc.sys.localStorage.setItem("archive",c.default.encrypt(JSON.stringify({data:e})))}function d(){var e=r.Game.currentArchive;return l()[e]}function p(){var e=d(),t=r.Game.currentRule,o=e.roleInfo[t];return r.Game.intimacy=o.intimacy,r.Game.combatPgs=o.combat,o}function f(){return d().roleInfo}o.getArchive=l,o.setArchive=u,o.getArchiveInfo=d,o.getArchiveUserScore=function(){return d().userScore},o.updateUserScore=function(e){var t=r.Game.currentArchive,o=l();o[t].userScore=e,r.Game.userScore=e,u(o)},o.updateIntimacy=function(e){if(e>200)r.Game.intimacy=200;else{var t=r.Game.currentArchive,o=l();o[t].roleInfo[r.Game.currentRule].intimacy=e,r.Game.intimacy=e,u(o)}},o.updateCombatPgs=function(e){if(e>4)r.Game.combatPgs=4;else{var t=r.Game.currentArchive,o=l();if(o[t].roleInfo[r.Game.currentRule].combat=e,r.Game.combatPgs=e,u(o),4==e){var n=f(),i=n.filter(function(e,t){return!e.unlock&&t<8});if(0==i.length)return;n[i[a.random(0,i.length-1)].id].unlock=!0;var s=l();s[t].roleInfo=n,u(s)}}},o.unlockRole=function(e){var t=r.Game.currentArchive,o=l();o[t].roleInfo[e].unlock=!0,u(o)},o.removeArchive=function(e){cc.sys.localStorage.removeItem("setCarrySkill1_"+e),cc.sys.localStorage.removeItem("setCarrySkill2_"+e),cc.sys.localStorage.removeItem("addSelfHasSkill1_"+e),cc.sys.localStorage.removeItem("addSelfHasSkill2_"+e),cc.sys.localStorage.removeItem("addSelfAllSkill_"+e),cc.sys.localStorage.removeItem("unclock_"+e),cc.sys.localStorage.removeItem("hasBeenEquipped_"+e),cc.sys.localStorage.removeItem("unclockCount_"+e)},o.getRoleInfo=p,o.getAllRoleInfo=f,o.readAllLocalData=function(){y(),p(),h.getCarrySkill1(),h.getCarrySkill2(),h.getSelfHasSkill1(),h.getSelfHasSkill2(),h.getSelfHasAllSkill(),h.getUnclockSkillBox(),h.getHasBeenEquipped()};var h=function(){function e(){}return e.setCarrySkill1=function(e,t){var o=r.Game.currentArchive,n=this.getCarrySkill1();n[e]=t,r.Game.carrySkill1=n,cc.sys.localStorage.setItem("setCarrySkill1_"+o,JSON.stringify(n))},e.getCarrySkill1=function(){var e=r.Game.currentArchive,t=cc.sys.localStorage.getItem("setCarrySkill1_"+e),o=i.default.Sys_Player[1].initAbility.split(",");return t=t&&JSON.parse(t)||o,r.Game.carrySkill1=t,t},e.setCarrySkill2=function(e,t){var o=r.Game.currentArchive,n=this.getCarrySkill2();n[e]=t,r.Game.carrySkill2=n,cc.sys.localStorage.setItem("setCarrySkill2_"+o,JSON.stringify(n))},e.getCarrySkill2=function(){var e=r.Game.currentArchive,t=cc.sys.localStorage.getItem("setCarrySkill2_"+e),o=i.default.Sys_Player[1].initItem;return t=t&&JSON.parse(t)||[o,null,null,null],r.Game.carrySkill2=t,t},e.addSelfHasSkill1=function(e){var t=r.Game.currentArchive,o=this.getSelfHasSkill1();o.push(e),r.Game.selfHasSkills1=o,this.addSelfAllSkill(e),cc.sys.localStorage.setItem("addSelfHasSkill1_"+t,JSON.stringify(o))},e.getSelfHasSkill1=function(){var e=r.Game.currentArchive,t=cc.sys.localStorage.getItem("addSelfHasSkill1_"+e),o=i.default.Sys_Player[1].initAbility.split(","),n=t&&JSON.parse(t)||o;return r.Game.selfHasSkills1=n,n},e.addSelfHasSkill2=function(e){var t=r.Game.currentArchive,o=this.getSelfHasSkill2();o.push(e),r.Game.selfHasSkills2=o,this.addSelfAllSkill(e),cc.sys.localStorage.setItem("addSelfHasSkill2_"+t,JSON.stringify(o))},e.getSelfHasSkill2=function(){var e=r.Game.currentArchive,t=cc.sys.localStorage.getItem("addSelfHasSkill2_"+e),o=i.default.Sys_Player[1].initItem,n=t&&JSON.parse(t)||[o];return r.Game.selfHasSkills2=n,n},e.addSelfAllSkill=function(e){var t=r.Game.currentArchive,o=this.getSelfHasAllSkill();o.push(e),r.Game.selfAllSkills=o,cc.sys.localStorage.setItem("addSelfAllSkill_"+t,JSON.stringify(o))},e.getSelfHasAllSkill=function(){var e=r.Game.currentArchive,t=cc.sys.localStorage.getItem("addSelfAllSkill_"+e),o=i.default.Sys_Player[1].initItem,n=i.default.Sys_Player[1].initAbility.split(",");n.push(o);var s=t&&JSON.parse(t)||n;return r.Game.selfAllSkills=s,s},e.getSelfHasSkill=function(e){return r.Game.selfAllSkills.includes(e)},e.unclockSkillBox=function(e){var t=r.Game.currentArchive,o=this.getUnclockSkillBox();o[e]=!0,r.Game.unclock=o,cc.sys.localStorage.setItem("unclock_"+t,JSON.stringify(o))},e.getUnclockSkillBox=function(){var e=r.Game.currentArchive,t=cc.sys.localStorage.getItem("unclock_"+e),o=t&&JSON.parse(t)||[!0,!1,!1,!1];return r.Game.unclock=o,o},e.getHasBeenEquipped=function(){var e=r.Game.currentArchive,t=i.default.Sys_Player[1].initItem,o=i.default.Sys_Player[1].initAbility.split(",");o.push(t);var n=cc.sys.localStorage.getItem("hasBeenEquipped_"+e),s=n&&JSON.parse(n)||o;return r.Game.hasBeenEquipped=s,s},e.setHasBeenEquipped=function(e){var t=r.Game.currentArchive,o=this.getHasBeenEquipped();o.push(e),r.Game.hasBeenEquipped=o,cc.sys.localStorage.setItem("hasBeenEquipped_"+t,JSON.stringify(o))},e.getIsEquipped=function(e){return r.Game.hasBeenEquipped.includes(e)},e.removeEquippedSkill=function(e){var t=r.Game.currentArchive,o=r.Game.hasBeenEquipped;if(o.includes(e)){var n=o.indexOf(e);o.splice(n,1),r.Game.hasBeenEquipped=o,cc.sys.localStorage.setItem("hasBeenEquipped_"+t,JSON.stringify(o))}},e}();function y(){var e=r.Game.currentArchive,t=cc.sys.localStorage.getItem("unclockCount_"+e)||0;r.Game.unclockCount=t}o.Skill=h,o.setLanguage=function(e){r.Game.language=e,cc.sys.localStorage.setItem("language",e)},o.getLanguage=function(){return r.Game.language=cc.sys.localStorage.getItem("language")||"chineseTraditional",r.Game.language},o.addUnclockCount=function(){r.Game.unclockCount++;var e=r.Game.currentArchive;cc.sys.localStorage.setItem("unclockCount_"+e,r.Game.unclockCount)},o.getUnclockCount=y,o.getUnclockCoin=function(e){return+i.default.Sys_Player[1].unlock.split(",")[e]},o.getItemSkills=function(e){for(var t=r.Game.selfHasSkills1,o=n.getTriggerType(e),i=[],s=function(e){var n=o[e];t.find(function(e){return e==n.id})&&i.push(n)},a=0;a<o.length;a++)s(a);return i},o.getRuleCg=function(e){var t,o=i.default.Sys_Album.find(function(t){return t.id==e});return(null===(t=null===o||void 0===o?void 0:o.cg_id)||void 0===t?void 0:t.split(","))||[]},o.getRoleAbilityIcon=function(e){return i.default.Sys_Ability.find(function(t){return t.id==e}).icon},o.getSysHint=function(e){return i.default.Sys_Localization.find(function(t){return t.id==e})[r.Game.language]||""},o.getOption=function(e){var t=s.I18n.getItemIndex();return t>0?t+=2:t=1,e["option_cn_"+t].split("/")},cc._RF.pop()},{"../Config":"Config","../Game":"Game","../I18n":"I18n","../commom/Sys_skillclassify":"Sys_skillclassify","./AES":"AES","./NodeHelp":"NodeHelp"}],Define:[function(e,t,o){"use strict";cc._RF.push(t,"7dcddvja+9NLrlqNr68rmPz","Define"),Object.defineProperty(o,"__esModule",{value:!0}),o.RULE=o.Direction=o.NEW_USER_SCORE=void 0,o.NEW_USER_SCORE=1e5,o.Direction={TOP:0,BOTTOM:1,LEFT:2,RIGTH:3};var n=function(){function e(){}return e.LLNP=1,e.WUNV=2,e.JS=3,e.SG=4,e.AJL=5,e.NW=6,e.ZS=7,e.BSR=8,e.MM=9,e.RZR=10,e.MONV=11,e.SENL=12,e}();o.RULE=n,cc._RF.pop()},{}],Dialog:[function(e,t,o){"use strict";cc._RF.push(t,"5580cWpyIlOBpdioXfU3P25","Dialog"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){this.data=[]}return e.prototype.setData=function(e){this.data=e},e.prototype.getAChat=function(){return this.data.shift()},e}();o.default=n,cc._RF.pop()},{}],Effect:[function(e,t,o){"use strict";cc._RF.push(t,"7ad71+sZ9FDoZxxa0uABUY6","Effect"),Object.defineProperty(o,"__esModule",{value:!0}),o.Effect=void 0;var n=function(){function e(e,t){this.Spine=null,this.listennerProcess=null,this.nodeTarget=null,this.skin="\u9ed8\u8ba4",this.anim="\u5f85\u673a",this.nodeTarget=t,this.loadData(e,t)}return e.prototype.loadData=function(e,t){var o=this;cc.resources.load(e,sp.SkeletonData,this.onProcess.bind(this),function(n,i){if(n)return console.warn("spine load failed",e);o.Spine=t.getComponent("sp.Skeleton"),o.Spine.skeletonData=i,o.Spine.setSkin(o.skin),o.Spine.setAnimation(0,o.anim,!0)}.bind(this))},e.prototype.onProcess=function(e,t,o){this.listennerProcess&&this.listennerProcess(e,t,o)},e.prototype.setAnimation=function(e,t){var o;void 0===t&&(t=!0),null===(o=this.Spine)||void 0===o||o.setAnimation(0,e,t)},e.prototype.setNodeState=function(e){this.nodeTarget.active=e},e.prototype.setSkin=function(e){this.skin=e,this.Spine&&this.Spine.setSkin(e)},e.prototype.setAnim=function(e){this.anim=e},e}();o.Effect=n,cc._RF.pop()},{}],EventMgr:[function(e,t,o){"use strict";cc._RF.push(t,"c1c87QGLE5BNK7tX54l34d0","EventMgr"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){}return e.addEventListener=function(e,t,o){this._listeners[e]={callback:t,eventTarget:o}},e.hasEventListener=function(e){return void 0!==this._listeners[e]},e.removeEventListener=function(e){void 0!==this._listeners[e]&&delete this._listeners[e]},e.removeAllListener=function(){this._listeners={}},e.dispatchEvent=function(e,t){var o,n=this._listeners[e];null===(o=null===n||void 0===n?void 0:n.callback)||void 0===o||o.call(n.eventTarget,t)},e._listeners={},e}();o.default=n,cc._RF.pop()},{}],GameConfir:[function(e,t,o){"use strict";cc._RF.push(t,"98259pEySBG7qhz2/tILd8o","GameConfir");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,o,s):i(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../Base"),s=cc._decorator,a=s.ccclass,c=s.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t.nodeCancel=null,t.listenSure=null,t.listenCancel=null,t}return n(t,e),t.prototype.showBtnCancel=function(){return this.nodeCancel.active=!0,this},t.prototype.setText=function(e){return this.label.string=e,this},t.prototype.onSure=function(){this.listenSure&&this.listenSure(),this.node.removeFromParent()},t.prototype.onCancel=function(){this.listenCancel&&this.listenCancel(),this.node.removeFromParent()},i([c(cc.Label)],t.prototype,"label",void 0),i([c(cc.Node)],t.prototype,"nodeCancel",void 0),t=i([a],t)}(r.default);o.default=l,cc._RF.pop()},{"../Base":"Base"}],GameSet:[function(e,t,o){"use strict";cc._RF.push(t,"5d0bcJRBCVLXJwqnBCcYVdd","GameSet");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,o,s):i(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../utils/SoundMgr"),s=e("../Base"),a=e("../utils/SceneMgr"),c=e("../utils/Data"),l=e("../I18n"),u=e("../utils/StatusMgr"),d=e("../utils/NodeHelp"),p=e("../commom/LangMap"),f=e("../Game"),h=cc._decorator,y=h.ccclass,_=h.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.fMusicVoice=null,t.fSoundVoice=null,t.nstyle=0,t.musicSlider=null,t.soundSlider=null,t.musicProgressBar=null,t.soundProgressBar=null,t.tcLangList=null,t.nodeBack=null,t.nodeSelectLang=null,t.label_language=null,t.toggleNo=null,t.toggleOff=null,t}return n(t,e),t.prototype.onSliderMusicChange=function(e){this.fMusicVoice=this.musicSlider.progress,r.default.setMusicValue(this.fMusicVoice),r.default.chanageVolume(),this.musicProgressBar.progress=this.musicSlider.progress},t.prototype.onSliderSoundChange=function(e){this.fSoundVoice=this.soundSlider.progress,r.default.setSoundValue(this.fSoundVoice),r.default.chanageVolume(),this.soundProgressBar.progress=this.soundSlider.progress},t.prototype.onToggleEvent=function(e,t){switch(t){case"no":this.nstyle=1,f.Game.dressStyle=1;break;case"off":this.nstyle=0,f.Game.dressStyle=0}},t.prototype.start=function(){var e=cc.sys.localStorage.getItem("fMusicVoice"),t=cc.sys.localStorage.getItem("fSoundVoice"),o=cc.sys.localStorage.getItem("dressStyle");this.fMusicVoice=null==e?1:parseFloat(e),this.fSoundVoice=null==t?1:parseFloat(t),this.nstyle=null==o?1:Number(o),this.musicSlider.progress=this.fMusicVoice,this.soundSlider.progress=this.fSoundVoice,this.musicProgressBar.progress=this.fMusicVoice,this.soundProgressBar.progress=this.fSoundVoice,r.default.setSoundValue(this.fSoundVoice),r.default.setMusicValue(this.fMusicVoice),("login"!=a.default.getSceneName()||u.default.SECOND_VIEW_STACK.length>0)&&(this.nodeBack.active=!0),this.label_language.string=p.default[c.getLanguage()],this.nstyle?this.toggleNo.check():this.toggleOff.check()},t.prototype.onDisable=function(){cc.sys.localStorage.setItem("fMusicVoice",this.fMusicVoice),cc.sys.localStorage.setItem("fSoundVoice",this.fSoundVoice),cc.sys.localStorage.setItem("dressStyle",this.nstyle)},t.prototype.showSelectLanguage=function(){this.nodeSelectLang.active=!0;var e=l.I18n.getItemIndex();this.tcLangList.node.children[e].getComponent(cc.Toggle).check()},t.prototype.onHideLanguage=function(){this.nodeSelectLang.active=!1},t.prototype.onClickLanguage=function(e,t){c.setLanguage(t),this.label_language.string=p.default[t],this.onHideLanguage()},t.prototype.onBackScene=function(){var e;if(this.node.removeFromParent(),u.default.SECOND_VIEW_STACK.length>0){var t=u.default.SECOND_VIEW_STACK.pop(),o=(null===(e=cc.director.getScene())||void 0===e?void 0:e.getChildByName("Canvas")).getChildByName(t);o&&d.setNodeHide(o,.8,!0)}else console.warn("\u8fd4\u56de\u4e0a\u4e00\u573a\u666f"),a.default.backScene()},i([_(cc.Slider)],t.prototype,"musicSlider",void 0),i([_(cc.Slider)],t.prototype,"soundSlider",void 0),i([_(cc.ProgressBar)],t.prototype,"musicProgressBar",void 0),i([_(cc.ProgressBar)],t.prototype,"soundProgressBar",void 0),i([_(cc.ToggleContainer)],t.prototype,"tcLangList",void 0),i([_(cc.Node)],t.prototype,"nodeBack",void 0),i([_(cc.Node)],t.prototype,"nodeSelectLang",void 0),i([_(cc.Label)],t.prototype,"label_language",void 0),i([_(cc.Toggle)],t.prototype,"toggleNo",void 0),i([_(cc.Toggle)],t.prototype,"toggleOff",void 0),t=i([y],t)}(s.default);o.default=m,cc._RF.pop()},{"../Base":"Base","../Game":"Game","../I18n":"I18n","../commom/LangMap":"LangMap","../utils/Data":"Data","../utils/NodeHelp":"NodeHelp","../utils/SceneMgr":"SceneMgr","../utils/SoundMgr":"SoundMgr","../utils/StatusMgr":"StatusMgr"}],Game:[function(e,t,o){"use strict";cc._RF.push(t,"f8604pxj9dCyKSkLCMRdomE","Game"),Object.defineProperty(o,"__esModule",{value:!0}),o.Game=void 0;var n=function(){function e(){}return e.skill1=0,e.skill2=0,e.skill3=0,e.skill4=0,e.intimacy=0,e.combatPgs=0,e.pain=0,e.pleasure=1,e.dressStyle=1,e.userScore=0,e.currentRule=0,e.currentArchive=0,e.spineSkin="\u7a7f\u8863",e.RoleInfo=[],e.language="",e.carrySkill1=[],e.carrySkill2=[],e.selfHasSkills1=[],e.selfHasSkills2=[],e.selfAllSkills=[],e.unclock=[],e.hasBeenEquipped=[],e.unclockCount=0,e}();o.Game=n,cc._RF.pop()},{}],GirlSmMain:[function(e,t,o){"use strict";cc._RF.push(t,"dda58lYPMVF05ZkBkAxe972","GirlSmMain");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,o,s):i(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../utils/NodeHelp"),s=e("../utils/SceneMgr"),a=e("../utils/StatusMgr"),c=e("../utils/EventMgr"),l=e("../Game"),u=cc._decorator,d=u.ccclass,p=(u.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.start=function(){a.default.SECOND_VIEW_STACK=[],l.Game.intimacy<200?(a.default.GIRL_SM_BRANCH="4",r.showSmPrelude()):r.showSmGuid(),c.default.addEventListener("event_girlSmGuidEnd",this.startGirlSm,this),c.default.addEventListener("event_girlSmPreludeEnd",this.startSmPrelude,this),c.default.addEventListener("event_girlSmEnd",this.startPlot,this),c.default.addEventListener("event_girlSmPlotEnd",this.girlSmEnd,this),cc.systemEvent.on("keydown",function(e){switch(e.keyCode){case cc.macro.KEY.escape:r.showGameSet()}},this),r.TransitionsShow()},t.prototype.startGirlSm=function(){r.removePrefabByName("pfSmGuid"),a.default.SM_MODULE?r.showGirlSm():r.showSmPrelude()},t.prototype.startSmPrelude=function(){r.showGirlSm(),r.removePrefabByName("pfSmPrelude")},t.prototype.startPlot=function(e){r.removePrefabByName("pfGirlSM"),r.showPlot().then(function(t){t.getComponent("Plot").init(e)})},t.prototype.girlSmEnd=function(){s.default.backScene()},t=i([d],t)}(cc.Component));o.default=p,cc._RF.pop()},{"../Game":"Game","../utils/EventMgr":"EventMgr","../utils/NodeHelp":"NodeHelp","../utils/SceneMgr":"SceneMgr","../utils/StatusMgr":"StatusMgr"}],GirlSm:[function(e,t,o){"use strict";cc._RF.push(t,"4fce6cjmRpGcYBO/U9WwC+z","GirlSm");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,o,s):i(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../utils/EventMgr"),s=e("../../utils/StatusMgr"),a=e("../../utils/NodeHelp"),c=e("../../commom/SpineMap"),l=e("../../Game"),u=e("../../components/Effect"),d=e("../../commom/SmMap"),p=e("../../Config"),f=e("../../girlsm/SmConfig"),h=e("../../utils/SoundMgr"),y=cc._decorator,_=y.ccclass,m=y.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nodeProgress=null,t.nodeListenner=null,t.progressBarLeft=null,t.ProgressBarRight=null,t.nodeBtn=null,t.nodeBtnStyle=null,t.btnOpation=[],t.label_pleasure=null,t.label_pain=null,t.nodeSpine=null,t.currentProp="",t.pain_count=0,t.pleasure_count=0,t.propItem=[],t.style=1,t.Spine=null,t.propScore=[],t.mousemoveCount=0,t.intervalId1=65535,t.intervalId2=65535,t.intervalId3=65535,t.intervalId4=65535,t}return n(t,e),t.prototype.start=function(){this.pain_count=l.Game.pain,this.pleasure_count=l.Game.pleasure,s.default.SM_MODULE?this.nodeBtnStyle.active=!0:(this.nodeProgress.active=!0,a.setNodeShow(this.nodeProgress));var e="spines/"+c.Sm[l.Game.currentRule];this.Spine=new u.Effect(e,this.nodeSpine),2==l.Game.currentRule?(this.Spine.setSkin("default"),this.Spine.setAnim("\u5f85\u673a1")):this.Spine.setSkin("\u7a7f\u8863"),this.setButtonSpf(),this.setProgress(),this.addListenner(),a.TransitionsShow()},t.prototype.runAction=function(e){var t=this,o=d.default[l.Game.currentRule][1],n=f.default[o],i=this.findItem(e,n[this.currentProp]);if(!i)return 2==l.Game.currentRule?this.Spine.setAnimation("\u5f85\u673a"+this.style):this.Spine.setAnimation("\u5f85\u673a"),this.addPleasure(this.propScore[0]),this.addPain(this.propScore[1]),void(this.propScore=[]);this.propScore.length>0&&(this.addPleasure(this.propScore[0]),this.addPain(this.propScore[1]),this.propScore=[]),h.default.play("sound/"+i.sound);var r=p.default.Sys_Animation.find(function(e){var o=i.style?i.ani+t.style:i.ani;return e.cg==o});if(i.score){var s=i.score.split("_");this.propScore=s}r&&this.Spine.setAnimation(r.name)},t.prototype.showPropIcon=function(e){var t=this,o=d.default[l.Game.currentRule][1],n=f.default[o],i=this.findItem(e,n[this.currentProp]),r=this.node.getChildByName("node_prop_icon");if(i)if(r){var s=this.node.convertToNodeSpaceAR(cc.v2(e.x,e.y));r.setPosition(s)}else{var c=new cc.Node;c.addComponent(cc.Sprite),this.node.addChild(c,100,"node_prop_icon");s=this.node.convertToNodeSpaceAR(cc.v2(e.x,e.y));c.setPosition(s);var u=p.default.Sys_Item.find(function(e){return e.id==t.currentProp});a.setNodeSpf("girlSm/"+u.iconId,c)}else r&&r.removeFromParent()},t.prototype.findItem=function(e,t){for(var o=e.x,n=e.y,i=null,r=0;r<t.length;r++){var s=t[r];if(s.area==this.style||0==s.area){var a=s.pos.split("/"),c=a[0].split("_"),l=a[1].split("_");if(o>c[0]&&o<c[1]&&n>l[0]&&n<l[1]){i=s;break}}}return i},t.prototype.addListenner=function(){var e=this;this.nodeListenner.on("mousemove",function(t){var o=t.getLocation();e.mousemoveCount++,e.mousemoveCount>10&&(e.showPropIcon(o),e.mousemoveCount=0)},this),this.nodeListenner.on("touchstart",function(t){var o=t.getLocation();e.runAction(o)},this)},t.prototype.removeListenner=function(){this.nodeListenner.off("mousemove"),this.nodeListenner.off("touchstart")},t.prototype.addPain=function(e){s.default.SM_MODULE||(this.pain_count+=Number(e),this.setProgress(),this.pain_count>=500&&a.TransitionsHide().then(function(e){r.default.dispatchEvent("event_girlSmEnd","4")}))},t.prototype.setProgress=function(){this.setSocreProgress1(+this.label_pain.string,this.pain_count,this.ProgressBarRight),this.setSocreProgress2(+this.label_pleasure.string,this.pleasure_count,this.progressBarLeft),this.setScoreLabel3(+this.label_pain.string,this.pain_count,this.label_pain),this.setScoreLabel4(+this.label_pleasure.string,this.pleasure_count,this.label_pleasure)},t.prototype.addPleasure=function(e){s.default.SM_MODULE||(this.pleasure_count+=Number(e),this.setProgress(),this.pleasure_count>=500&&a.TransitionsHide().then(function(e){r.default.dispatchEvent("event_girlSmEnd","5")}))},t.prototype.setButtonSpf=function(){for(var e=d.default[l.Game.currentRule][s.default.SM_MODULE],t=p.default.Sys_GirlSm.find(function(t){return t.id==e}).item.split(","),o=function(e){var o=p.default.Sys_Item.find(function(o){return o.id==t[e]});n.btnOpation[e].itemId=o.id,a.setNodeSpf("girlSm/"+o.iconId+"_1",n.btnOpation[e].getChildByName("Background")),a.setNodeSpf("girlSm/"+o.iconId+"_2",n.btnOpation[e].getChildByName("checkmark")),0==e&&(n.currentProp=o.id)},n=this,i=0;i<t.length;i++)o(i);this.propItem=t},t.prototype.onButtonset=function(){a.showGameSet()},t.prototype.onButtonOpation=function(e,t){var o=e.target.itemId;switch(t){case"0":case"1":case"2":this.currentProp=o}},t.prototype.onButtonStyle=function(e,t){"2"==t?2==l.Game.currentRule?(this.Spine.setSkin("default"),this.Spine.setAnimation("\u5f85\u673a2")):(this.Spine.setSkin("\u88f8\u4f53"),this.Spine.setAnimation("\u5f85\u673a")):2==l.Game.currentRule?(this.Spine.setSkin("default"),this.Spine.setAnimation("\u5f85\u673a1")):(this.Spine.setSkin("\u7a7f\u8863"),this.Spine.setAnimation("\u5f85\u673a")),this.style=+t},t.prototype.setSocreProgress1=function(e,t,o){var n=this;clearInterval(this.intervalId1),this.intervalId1=setInterval(function(i){(e+=10)>t&&(e=t,clearInterval(n.intervalId1)),o.progress=e/500},30)},t.prototype.setSocreProgress2=function(e,t,o){var n=this;clearInterval(this.intervalId2),this.intervalId2=setInterval(function(i){(e+=10)>t&&(e=t,clearInterval(n.intervalId2)),o.progress=e/500},30)},t.prototype.setScoreLabel3=function(e,t,o){var n=this;clearInterval(this.intervalId3),this.intervalId3=setInterval(function(i){(e+=10)>t&&(e=t,clearInterval(n.intervalId3)),o.string=e},30)},t.prototype.setScoreLabel4=function(e,t,o){var n=this;clearInterval(this.intervalId4),this.intervalId4=setInterval(function(i){(e+=10)>t&&(e=t,clearInterval(n.intervalId4)),o.string=e},30)},i([m(cc.Node)],t.prototype,"nodeProgress",void 0),i([m(cc.Node)],t.prototype,"nodeListenner",void 0),i([m(cc.ProgressBar)],t.prototype,"progressBarLeft",void 0),i([m(cc.ProgressBar)],t.prototype,"ProgressBarRight",void 0),i([m(cc.Node)],t.prototype,"nodeBtn",void 0),i([m(cc.Node)],t.prototype,"nodeBtnStyle",void 0),i([m([cc.Node])],t.prototype,"btnOpation",void 0),i([m(cc.Label)],t.prototype,"label_pleasure",void 0),i([m(cc.Label)],t.prototype,"label_pain",void 0),i([m(cc.Node)],t.prototype,"nodeSpine",void 0),t=i([_],t)}(cc.Component);o.default=g,cc._RF.pop()},{"../../Config":"Config","../../Game":"Game","../../commom/SmMap":"SmMap","../../commom/SpineMap":"SpineMap","../../components/Effect":"Effect","../../girlsm/SmConfig":"SmConfig","../../utils/EventMgr":"EventMgr","../../utils/NodeHelp":"NodeHelp","../../utils/SoundMgr":"SoundMgr","../../utils/StatusMgr":"StatusMgr"}],Hint:[function(e,t,o){"use strict";cc._RF.push(t,"055e2xzlQRNmKfpSGutXty3","Hint");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,o,s):i(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,a=r.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t}return n(t,e),t.prototype.init=function(e){this.label.string=e},i([a(cc.Label)],t.prototype,"label",void 0),t=i([s],t)}(cc.Component);o.default=c,cc._RF.pop()},{}],Home:[function(e,t,o){"use strict";cc._RF.push(t,"3fd9cuBm4xLqoWtwk+y7jeD","Home");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,o,s):i(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../Game"),s=e("../utils/NodeHelp"),a=e("../utils/EventMgr"),c=e("../utils/Data"),l=e("../utils/StatusMgr"),u=e("../utils/SceneMgr"),d=e("../Define"),p=e("../I18n"),f=e("../Config"),h=e("../utils/SoundMgr"),y=cc._decorator,_=y.ccclass,m=y.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label_score=null,t.nodeContent=null,t.nodeContent2=null,t.nodeLayer=null,t.nodePowerLeft=null,t.nodePowerRight=null,t.nodeBtnCheckp=[],t.pfRule=null,t.nodeMirror=[],t.nodeCheckp=null,t.pfShop=null,t.pfSkillBox2=null,t.pfSkillBox1=null,t.currentOpenBox=0,t.mouseCount=0,t}return n(t,e),t.prototype.start=function(){var e=this;c.readAllLocalData(),a.default.addEventListener("user_click_role",this.onRoleClick,this),c.getUnclockCount();var t=c.getArchiveUserScore();this.label_score.string=t,c.updateUserScore(t),this.setRoleUnlockStatus(),a.default.addEventListener("exchange_user_score",function(){e.label_score.string=r.Game.userScore+""},this),this.initNodeLeft(),this.initNodeRight(),h.default.play("sound/bg1",!0),s.TransitionsShow()},t.prototype.updateCarry=function(e){var t=this.nodePowerRight.children[this.currentOpenBox].getChildByName("checkmark"),o=f.default.Sys_Item.find(function(t){return t.id==e}),n=r.Game.carrySkill2[this.currentOpenBox];n&&c.Skill.removeEquippedSkill(n),c.Skill.setHasBeenEquipped(e),c.Skill.setCarrySkill2(this.currentOpenBox,e),o&&s.setNodeSpf("home/skills/"+o.iconId,t),this.node.getChildByName("skill_box").getComponent("SkillBox").init()},t.prototype.initNodeLeft=function(){for(var e=c.Skill.getCarrySkill1(),t=function(t){var n=o.nodePowerLeft.children[t];n.on("mouseenter",function(e){cc.tween(e.target).to(.05,{scale:1.1}).start()},o),n.on("mouseleave",function(e){e.target.setScale(1)},o);var i=n.getChildByName("checkmark"),r=f.default.Sys_Ability.find(function(o){return o.id==e[t]});r&&s.setNodeSpf("home/skills/"+r.icon,i)},o=this,n=0;n<this.nodePowerLeft.childrenCount;n++)t(n)},t.prototype.onButtonEvent=function(e){switch(e.target.name){case"btn_set":return s.showGameSet();case"btn_shop":return this.showShop();case"btn_combat":return r.Game.currentRule=d.RULE.LLNP,u.default.loadScene("mainGame");case"btn_checkp":return this.exchangeBtnState(1);case"btn_checkp2":return this.exchangeBtnState(2)}},t.prototype.exchangeBtnState=function(e){this.nodeBtnCheckp[0].active=!this.nodeBtnCheckp[0].active,this.nodeBtnCheckp[1].active=!this.nodeBtnCheckp[1].active,this.nodeMirror[0].active=!this.nodeMirror[0].active,this.nodeMirror[1].active=!this.nodeMirror[1].active,1==e&&this.setRoleUnlockStatus2(),s.removeNodeChild(this.node,"current_role")},t.prototype.onRoleClick=function(e){console.warn("\u9009\u62e9\u89d2\u8272\uff1a",e),r.Game.currentRule=Number(e);var t=cc.instantiate(this.pfRule);this.node.addChild(t,100,"current_role"),t.getComponent("Role").tsHome=this,a.default.addEventListener("showStory",this.showStory,this),a.default.addEventListener("showInroduce",this.showInroduce,this)},t.prototype.onTest=function(){console.warn("\u9009\u62e9\u89d2\u8272ttt\uff1a")},t.prototype.onClickLift=function(e,t){console.warn("\u5de6\u8fb9\u70b9\u51fb:"+t),this.hideOtherSkillBox1(t);var o=cc.instantiate(this.pfSkillBox1),n=o.convertToNodeSpaceAR(this.nodePowerLeft.children[+t].convertToWorldSpaceAR(cc.v2(0,0)));this.node.addChild(o,100,"skill_box1"),n.x=n.x-cc.winSize.width/2+80,n.y=n.y-cc.winSize.height/2,o.setPosition(n),this.currentOpenBox=+t;var i=o.getComponent("SkillBox1");o.itemId=+t;var r=+t;0==t||1==t?r++:2==t&&(r=9);var s=c.getItemSkills(r);i.init(s),a.default.addEventListener("updateSkillBox1",this.updateSkillBox1,this)},t.prototype.updateSkillBox1=function(e){var t=this.currentOpenBox;0==t||1==t?t++:2==t&&(t=9);var o=r.Game.carrySkill1[this.currentOpenBox];o&&c.Skill.removeEquippedSkill(o),c.Skill.setHasBeenEquipped(e),c.Skill.setCarrySkill1(this.currentOpenBox,e);var n=this.node.getChildByName("skill_box1"),i=c.getItemSkills(t);n.getComponent("SkillBox1").init(i);var a=this.nodePowerLeft.children[this.currentOpenBox].getChildByName("checkmark"),l=f.default.Sys_Ability.find(function(t){return t.id==e});l&&s.setNodeSpf("home/skills/"+l.icon,a)},t.prototype.hideOtherSkillBox1=function(e){var t;null===(t=this.node.getChildByName("skill_box1"))||void 0===t||t.removeFromParent()},t.prototype.onClickRight=function(e,t){var o=this,n=e.target;if(s.removeHint(),n.unclock){this.currentOpenBox=+t;var i=this.node.getChildByName("skill_box");c.Skill.getCarrySkill2();if(i)return;var l=cc.instantiate(this.pfSkillBox2);this.node.addChild(l,100,"skill_box"),a.default.addEventListener("updateCarry",this.updateCarry,this)}else{var u=c.getUnclockCoin(r.Game.unclockCount);if(r.Game.userScore<u)return s.showAlert(p.I18n.notEnoughCoin());s.showConfir(p.I18n.getUnclockText(e.target.itemId),!0).then(function(e){e.listenSure=function(){c.updateUserScore(r.Game.userScore-u),c.Skill.unclockSkillBox(+t),c.addUnclockCount(),a.default.dispatchEvent("exchange_user_score"),o.removeNodeListener(),o.initNodeRight(),o.currentOpenBox=+t,s.showAlert("success!")}})}},t.prototype.removeNodeListener=function(){for(var e=0;e<this.nodePowerRight.childrenCount;e++){var t=this.nodePowerRight.children[e];t.off("mouseenter"),t.off("mouseleave")}},t.prototype.initNodeRight=function(){for(var e=this,t=c.Skill.getCarrySkill2(),o=function(o){var i=n.nodePowerRight.children[o];if(c.Skill.getUnclockSkillBox()[o]){i.unclock=!0;var r=i.getChildByName("checkmark");i.getChildByName("clock").active=!1;var a=f.default.Sys_Item.find(function(e){return e.id==t[o]});return a&&s.setNodeSpf("home/skills/"+a.iconId,r),"continue"}i.itemId=o,i.on("mouseenter",function(t){s.showHint(t.target,p.I18n.getUnclockText(t.target.itemId),d.Direction.LEFT),e.mouseCount=0},n),i.on("mouseleave",function(e){s.removeHint()},n)},n=this,i=0;i<this.nodePowerRight.childrenCount;i++)o(i)},t.prototype.setRoleUnlockStatus=function(){var e=c.getAllRoleInfo();r.Game.RoleInfo=e,e=e.slice(1,9);for(var t=0;t<8;t++){if(e[t].unlock){var o=this.nodeMirror[0].children[t].getComponent("RoleItem");o.nodeMask.active=!1,o.nodeLock.active=!1,o.registEventListen()}}},t.prototype.setRoleUnlockStatus2=function(){var e=c.getAllRoleInfo();e=e.slice(9,13);for(var t=0;t<4;t++){if(e[t].unlock){var o=this.nodeMirror[1].children[t].getComponent("RoleItem");o.nodeMask.active=!1,o.nodeLock.active=!1,o.offListener(),o.registEventListen()}}},t.prototype.unlockDlcRole=function(e,t){var o=this;e.target.parent.getComponent("RoleItem").nodeLock.active&&s.showConfir("\u89e3\u9501\u6b64\u89d2\u8272\u9700\u8981$3000\uff0c\u786e\u5b9a\u8d2d\u4e70\u5417?",!0).then(function(e){e.listenSure=function(){c.unlockRole(Number(t)),o.setRoleUnlockStatus2(),s.showAlert("onlock succeed")}})},t.prototype.showShop=function(){var e=cc.instantiate(this.pfShop);this.node.addChild(e,101)},t.prototype.showStory=function(e){var t=this,o=this.node.getChildByName("current_role");if(l.default.SELECT_ROLE=!0,this.nodeCheckp.active=!1,this.nodeContent2.active){var n=this.nodeLayer.getChildByName("introduce");if(this.nodeLayer.getChildByName("nodeStory"))return;n&&n.removeFromParent();var i=cc.instantiate(e);this.nodeLayer.addChild(i,100,"story")}else s.nodeMoveRight(o,300).then(function(o){t.nodeContent2.active=!0;var n=cc.instantiate(e);t.nodeLayer.addChild(n,100,"story"),s.setNodeShow(n,2),s.setNodeShow(t.nodeContent2,2),s.setNodeHide(t.nodePowerLeft,1),s.setNodeHide(t.nodePowerRight,1)})},t.prototype.showInroduce=function(e){var t=this;l.default.SELECT_ROLE=!0,this.nodeCheckp.active=!1;var o=this.node.getChildByName("current_role");if(this.nodeContent2.active){var n=this.nodeLayer.getChildByName("story");if(this.nodeLayer.getChildByName("introduce"))return;n&&n.removeFromParent();var i=cc.instantiate(e);this.nodeLayer.addChild(i,100,"introduce")}else s.nodeMoveRight(o,300).then(function(o){t.nodeContent2.active=!0;var n=cc.instantiate(e);t.nodeLayer.addChild(n,100,"introduce"),s.setNodeShow(n,2),s.setNodeShow(t.nodeContent2,2),s.setNodeHide(t.nodePowerLeft,1),s.setNodeHide(t.nodePowerRight,1)})},t.prototype.onHideHint=function(){s.removeHint()},i([m(cc.Label)],t.prototype,"label_score",void 0),i([m(cc.Node)],t.prototype,"nodeContent",void 0),i([m(cc.Node)],t.prototype,"nodeContent2",void 0),i([m(cc.Node)],t.prototype,"nodeLayer",void 0),i([m(cc.Node)],t.prototype,"nodePowerLeft",void 0),i([m(cc.Node)],t.prototype,"nodePowerRight",void 0),i([m([cc.Node])],t.prototype,"nodeBtnCheckp",void 0),i([m(cc.Prefab)],t.prototype,"pfRule",void 0),i([m([cc.Node])],t.prototype,"nodeMirror",void 0),i([m(cc.Node)],t.prototype,"nodeCheckp",void 0),i([m(cc.Prefab)],t.prototype,"pfShop",void 0),i([m(cc.Prefab)],t.prototype,"pfSkillBox2",void 0),i([m(cc.Prefab)],t.prototype,"pfSkillBox1",void 0),t=i([_],t)}(cc.Component);o.default=g,cc._RF.pop()},{"../Config":"Config","../Define":"Define","../Game":"Game","../I18n":"I18n","../utils/Data":"Data","../utils/EventMgr":"EventMgr","../utils/NodeHelp":"NodeHelp","../utils/SceneMgr":"SceneMgr","../utils/SoundMgr":"SoundMgr","../utils/StatusMgr":"StatusMgr"}],I18n:[function(e,t,o){"use strict";cc._RF.push(t,"6406ffxyfJM+oNhAPRUg61e","I18n"),Object.defineProperty(o,"__esModule",{value:!0}),o.I18n=void 0;var n=e("./utils/Data"),i=e("./Config"),r=e("./Game"),s=e("./commom/RoleIdMap"),a=function(){function e(){}return e.getItemIndex=function(){var e=n.getLanguage();return this.arrType.indexOf(e)},e.getAbilityDesc=function(e){var t=n.getLanguage(),o=i.default.Sys_Localization.find(function(t){return t.key==e&&"info"==t.mapProperties});return i.default.Sys_Localization.find(function(t){return t.key==e&&"name"==t.mapProperties&&("sys_Ability"==t.className||"sys_Item"==t.className)})[t]+":"+o[t]},e.getAbilityDesc2=function(e){var t=n.getLanguage(),o=i.default.Sys_Localization.find(function(t){return t.key==e&&"info"==t.mapProperties&&"sys_Item"==t.className});return i.default.Sys_Localization.find(function(t){return t.key==e&&"name"==t.mapProperties&&("sys_Ability"==t.className||"sys_Item"==t.className)})[t]+":"+o[t]},e.getShopAbilityDesc=function(e){var t=n.getLanguage(),o=i.default.Sys_Localization.find(function(t){return t.key==e&&"info"==t.mapProperties&&"sys_Item"==t.className});return i.default.Sys_Localization.find(function(t){return t.key==e&&"name"==t.mapProperties&&("sys_Ability"==t.className||"sys_Item"==t.className)})[t]+":"+o[t]},e.getUnclockText=function(e){return i.default.Sys_Localization[568][n.getLanguage()]+"$"+n.getUnclockCoin(r.Game.unclockCount)},e.notEnoughCoin=function(){return i.default.Sys_Localization[567][n.getLanguage()]},e.getRuleInfo=function(e){var t=s.default[e],o=i.default.Sys_Enemy.find(function(e){return e.id==t}),r=i.default.Sys_Localization.find(function(e){return e.key==o.id&&"sys_Enemy"==e.className&&"name"==e.mapProperties}),a=i.default.Sys_Localization.find(function(e){return e.key==o.id&&"sys_Enemy"==e.className&&"intro"==e.mapProperties}),c=n.getLanguage();return o.name=r[c],o.info=a[c],o},e.getRoleAbilityInfo=function(e){var t=i.default.Sys_Ability.find(function(t){return t.id==e&&"BaseAbility"==t.className}),o=i.default.Sys_Localization.find(function(e){return e.key==t.id&&"info"==e.mapProperties}),r=i.default.Sys_Localization.find(function(e){return e.key==t.id&&"name"==e.mapProperties}),s=n.getLanguage();return r[s]+": "+o[s]},e.arrType=["chineseTraditional","english","japanese","spanish","russian","korean","thai","brazilianportuguese","turkish","ukraine"],e}();o.I18n=a,cc._RF.pop()},{"./Config":"Config","./Game":"Game","./commom/RoleIdMap":"RoleIdMap","./utils/Data":"Data"}],Inroduce:[function(e,t,o){"use strict";cc._RF.push(t,"5d3c3sJytxJXJSRH0/zoTrq","Inroduce");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,o,s):i(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../Game"),s=e("../../I18n"),a=e("../../utils/NodeHelp"),c=e("../../utils/Data"),l=cc._decorator,u=l.ccclass,d=l.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nodeStar=[],t.nodeSkills=[],t.labelName=null,t.labelDesc=null,t}return n(t,e),t.prototype.start=function(){var e=r.Game.currentRule,t=s.I18n.getRuleInfo(e);this.labelName.string=t.name,this.labelDesc.string=t.info;for(var o=t.star.split(","),n=0;n<this.nodeStar.length;n++)for(var i=+o[n],l=0;l<i;l++)this.nodeStar[n].children[l].active=!0;var u=t.possessskills.split(",");for(n=0;n<u.length;n++){var d=u[n].slice(0,5),p=c.getRoleAbilityIcon(d);a.setNodeSpf("home/skills/"+p,this.nodeSkills[n]),this.nodeSkills[n].itemId=d,this.addListener(this.nodeSkills[n])}},t.prototype.addListener=function(e){e.on("mouseenter",function(e){var t=e.target;a.showHint(t,s.I18n.getRoleAbilityInfo(t.itemId)),cc.tween(t).to(.05,{scale:1.1}).start()},this),e.on("mouseleave",function(e){e.target.setScale(1),a.removeHint()},this)},i([d([cc.Node])],t.prototype,"nodeStar",void 0),i([d([cc.Node])],t.prototype,"nodeSkills",void 0),i([d(cc.Label)],t.prototype,"labelName",void 0),i([d(cc.Label)],t.prototype,"labelDesc",void 0),t=i([u],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../../Game":"Game","../../I18n":"I18n","../../utils/Data":"Data","../../utils/NodeHelp":"NodeHelp"}],Interface:[function(e,t,o){"use strict";cc._RF.push(t,"9bf81hQp1ZPDb2CZ0gb7zD/","Interface"),Object.defineProperty(o,"__esModule",{value:!0}),o.Interface=void 0;var n=function(){return function(){}}();o.Interface=n,cc._RF.pop()},{}],LangMap:[function(e,t,o){"use strict";cc._RF.push(t,"4056bMxhLpC5rq3Ct4ajBMe","LangMap"),Object.defineProperty(o,"__esModule",{value:!0}),o.default={chineseTraditional:"\u7e41\u4f53\u4e2d\u6587",english:"English",japanese:"\u65e5\u672c\u8a9e",spanish:"Espa\xf1ol",russian:"\u0440\u0443\u0441\u0441\u043a\u0438\u0439",korean:"\ud55c\uad6d\uc5b4",thai:"\u0e44\u0e17\u0e22",brazilianportuguese:"Portugu\xeas",turkish:"T\xfcrk\xe7e",ukraine:"\u0443\u043a\u0440\u0430\u0457\u043d\u0441\u044c\u043a\u0430"},cc._RF.pop()},{}],Login:[function(e,t,o){"use strict";cc._RF.push(t,"4b481EhfeJG45EZHmAGJEg7","Login");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,o,s):i(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../utils/NodeHelp"),s=e("../utils/StatusMgr"),a=e("../Config"),c=e("../utils/Data"),l=e("../utils/SoundMgr"),u=cc._decorator,d=u.ccclass,p=u.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nodeStatement=null,t.nodeBg=null,t.mainContent=null,t.nodeRole=null,t}return n(t,e),t.prototype.start=function(){if(r.setFrame(),c.getLanguage(),cc.debug.setDisplayStats(!1),cc.game.setFrameRate(30),cc.director.getCollisionManager().enabled=!0,r.setNodeSpf("login/role/"+r.random(1,12),this.nodeRole),r.TransitionsShow(),s.default.FIRST_PALY){this.mainContent.active=!1,s.default.FIRST_PALY=!1,a.default.load(),this.showSecondPage(),this.nodeStatement.active=!1,l.default.play("sound/bg1",!0);var e=new cc.Node;cc.director.getScene().addChild(e,100,"PersistRootNode"),e.width=1920,e.height=1080,e.x=960,e.y=540,cc.game.addPersistRootNode(e)}},t.prototype.showSecondPage=function(){var e=this;this.nodeBg.active=!0,r.setNodeShow(this.nodeBg).then(function(t){setTimeout(function(){r.setNodeHide(e.nodeBg).then(function(t){e.showContent()})},1e3)})},t.prototype.showContent=function(){this.mainContent.active=!0},t.prototype.onButtonEvent=function(e,t){switch(t){case"back":cc.game.end();break;case"set":return r.showGameSet();case"photo":return r.showPhotoCollect();case"music":case"sound":return r.showConfir("\u656c\u8bf7\u671f\u5f85!")}},t.prototype.onClickPlayGame=function(){r.showArchive()},i([p(cc.Node)],t.prototype,"nodeStatement",void 0),i([p(cc.Node)],t.prototype,"nodeBg",void 0),i([p(cc.Node)],t.prototype,"mainContent",void 0),i([p(cc.Node)],t.prototype,"nodeRole",void 0),t=i([d],t)}(cc.Component);o.default=f,function(){Date.prototype.Format=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(var o in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),t)new RegExp("("+o+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[o]:("00"+t[o]).substr((""+t[o]).length)));return e};var e=cc.Button.prototype;e.touchEndClone=e._onTouchEnded,e._onTouchEnded=function(e){this.touchEndClone(e),-1==e.target.name.search("No_")&&l.default.play("sound/clickBtn")};var t=cc.Node.prototype;t.itemId=null,t.unclock=!1}(),cc._RF.pop()},{"../Config":"Config","../utils/Data":"Data","../utils/NodeHelp":"NodeHelp","../utils/SoundMgr":"SoundMgr","../utils/StatusMgr":"StatusMgr"}],NodeHelp:[function(e,t,o){"use strict";cc._RF.push(t,"3cc71Gmue1Djqd452FTaVqi","NodeHelp"),Object.defineProperty(o,"__esModule",{value:!0}),o.setBtnClickAgain=o.TransitionsShow=o.TransitionsHide=o.nodeShake=o.nodeMoveRight=o.nodeMoveLeft=o.showConfir=o.getNodeByName=o.removePrefabByName=o.showSmPrelude=o.showGirlSm=o.showPlot=o.showAlert=o.setNodeChildLabelString=o.loadPrefab=o.showSmGuid=o.showArchive=o.showPhotoCollect=o.removeNodeChild=o.removeHint=o.showHint=o.showGameSet=o.random=o.setNodeSpf=o.getWindowSizeScalRatio=o.setFrame=o.setNodeShow=o.setNodeHide=void 0;var n=e("../Define");o.setNodeHide=function(e,t,o){return void 0===t&&(t=.5),void 0===o&&(o=!1),new Promise(function(n){cc.tween(e).to(t,{opacity:0}).call(function(t){n(null),o&&e.removeFromParent()}).start()})},o.setNodeShow=function(e,t){return void 0===t&&(t=.5),new Promise(function(o){e.opacity=0,cc.tween(e).to(t,{opacity:255}).call(o).start()})},o.setFrame=function(){},o.getWindowSizeScalRatio=function(){var e=document.documentElement.clientWidth,t=document.documentElement.clientHeight-80,o=cc.view.getDesignResolutionSize().width,n=cc.view.getDesignResolutionSize().height,i=e/o,r=t/n,s=i<r?i:r;return[o*s,n*s]},o.setNodeSpf=function(e,t){cc.resources.load(e,cc.SpriteFrame,function(o,n){if(o)return console.warn("resources not found :",e);t.getComponent(cc.Sprite).spriteFrame=n})},o.random=function(e,t){return Math.round(Math.random()*(t-e))+e},o.showGameSet=function(){cc.resources.load("prefabs/pfGameSet",cc.Prefab,function(e,t){var o;if(!e&&t){var n=cc.instantiate(t);(null===(o=cc.director.getScene())||void 0===o?void 0:o.getChildByName("Canvas")).addChild(n,100,"gameSet")}})},o.showHint=function(e,t,o,i){void 0===o&&(o=0),void 0===i&&(i=30),cc.resources.load("prefabs/pfHint",cc.Prefab,function(r,s){var a;if(!r&&s){var c=cc.instantiate(s);(null===(a=cc.director.getScene())||void 0===a?void 0:a.getChildByName("Canvas")).addChild(c,102,"textHint"),c.getComponent("Hint").init(t);var l=c.convertToNodeSpaceAR(e.convertToWorldSpaceAR(cc.v2(0,0)));switch(o){case n.Direction.TOP:l.y+=i+c.height/2;break;case n.Direction.BOTTOM:l.y-=i+c.height/2;break;case n.Direction.LEFT:l.x-=i+c.width/2+30;break;case n.Direction.RIGTH:l.x+=i+c.width/2+30}c.setPosition(l)}})},o.removeHint=function(){var e,t;null===(t=(null===(e=cc.director.getScene())||void 0===e?void 0:e.getChildByName("Canvas")).getChildByName("textHint"))||void 0===t||t.removeFromParent()},o.removeNodeChild=function(e,t){var o=e.getChildByName(t);o&&o.removeFromParent()},o.showPhotoCollect=function(){cc.resources.load("prefabs/pfPhotoCollect",cc.Prefab,function(e,t){var o;if(!e&&t){var n=cc.instantiate(t);(null===(o=cc.director.getScene())||void 0===o?void 0:o.getChildByName("Canvas")).addChild(n,100,"photoCollect")}})},o.showArchive=function(){cc.resources.load("prefabs/pfArchive",cc.Prefab,function(e,t){var o;if(!e&&t){var n=cc.instantiate(t);(null===(o=cc.director.getScene())||void 0===o?void 0:o.getChildByName("Canvas")).addChild(n,100,"archive")}})},o.showSmGuid=function(){cc.resources.load("prefabs/pfSmGuid",cc.Prefab,function(e,t){var o;if(!e&&t){var n=cc.instantiate(t);(null===(o=cc.director.getScene())||void 0===o?void 0:o.getChildByName("Canvas")).addChild(n,100,"pfSmGuid")}})},o.loadPrefab=function(e){return new Promise(function(t){cc.resources.load(e,cc.Prefab,function(o,n){if(o)return console.warn(e,"_load faild");t(n)})})},o.setNodeChildLabelString=function(e,t,o){var n=e.getChildByName(t);if(n){var i=n.getComponent(cc.Label);i&&(i.string=o)}},o.showAlert=function(e){cc.resources.load("prefabs/pfGameAlert",cc.Prefab,function(t,n){var i;if(!t&&n){var r=cc.instantiate(n);(null===(i=cc.director.getScene())||void 0===i?void 0:i.getChildByName("Canvas")).addChild(r,100,"gameAlert"),r.y=355,o.setNodeChildLabelString(r,"label",e),setTimeout(function(){cc.tween(r).to(1,{opacity:0}).start()},2e3)}})},o.showPlot=function(){return new Promise(function(e){cc.resources.load("prefabs/pfPlot",cc.Prefab,function(t,o){var n;if(!t&&o){var i=cc.instantiate(o);(null===(n=cc.director.getScene())||void 0===n?void 0:n.getChildByName("Canvas")).addChild(i,100,"game_plot"),e(i)}})})},o.showGirlSm=function(){return new Promise(function(e){cc.resources.load("prefabs/pfGirlSM",cc.Prefab,function(t,o){var n;if(!t&&o){var i=cc.instantiate(o);(null===(n=cc.director.getScene())||void 0===n?void 0:n.getChildByName("Canvas")).addChild(i,100,"pfGirlSM"),e(i)}})})},o.showSmPrelude=function(){return new Promise(function(e){cc.resources.load("prefabs/pfSmPrelude",cc.Prefab,function(t,o){var n;if(!t&&o){var i=cc.instantiate(o);(null===(n=cc.director.getScene())||void 0===n?void 0:n.getChildByName("Canvas")).addChild(i,100,"pfSmPrelude"),e(i)}})})},o.removePrefabByName=function(e){var t,o=(null===(t=cc.director.getScene())||void 0===t?void 0:t.getChildByName("Canvas")).getChildByName(e);o&&o.removeFromParent()},o.getNodeByName=function(e){var t;return(null===(t=cc.director.getScene())||void 0===t?void 0:t.getChildByName("Canvas")).getChildByName(e)},o.showConfir=function(e,t){return void 0===e&&(e=""),void 0===t&&(t=!1),new Promise(function(o){cc.resources.load("prefabs/pfGameConfir",cc.Prefab,function(n,i){var r;if(!n&&i){var s=cc.instantiate(i);(null===(r=cc.director.getScene())||void 0===r?void 0:r.getChildByName("Canvas")).addChild(s,100,"gameConfir");var a=s.getComponent("GameConfir");a.setText(e),t&&a.showBtnCancel(),o(a)}})})},o.nodeMoveLeft=function(e,t){return void 0===t&&(t=null),new Promise(function(o){var n=e.x,i=t||e.width/2;cc.tween(e).to(.5,{position:cc.v2(n-i,0)},{easing:"quadOut"}).call(o).start()})},o.nodeMoveRight=function(e,t){return void 0===t&&(t=null),new Promise(function(o){var n=e.x,i=t||e.width/2;cc.tween(e).to(.5,{position:cc.v2(n+i,0)},{easing:"quadOut"}).call(o).start()})},o.nodeShake=function(e){cc.tween(e).to(.15,{position:cc.v2(5,11)}).to(.15,{position:cc.v2(-15,3)}).to(.15,{position:cc.v2(-6,7)}).to(.15,{position:cc.v2(1,10)}).to(.15,{position:cc.v2(-11,5)}).to(.15,{position:cc.v2(1,10)}).to(.15,{position:cc.v2(2,-8)}).to(.15,{position:cc.v2(-11,5)}).to(.15,{position:cc.v2(2,-8)}).to(.15,{position:cc.v2(12,-15)}).to(.15,{position:cc.v2(-15,3)}).to(.15,{position:cc.v2(12,-15)}).to(.15,{position:cc.v2(7,16)}).to(.15,{position:cc.v2(-8,3)}).to(.15,{position:cc.v2(5,-5)}).to(.15,{position:cc.v2(-5,2)}).to(.15,{position:cc.v2(0,0)}).start()},o.TransitionsHide=function(){var e=cc.director.getScene().getChildByName("PersistRootNode");return new Promise(function(t){cc.resources.load("prefabs/gameTransitions",cc.Prefab,function(o,n){if(!o&&n){var i=cc.instantiate(n);e.addChild(i,100,"gameTransitions"),i.opacity=0,cc.tween(i).to(1,{opacity:255}).call(function(e){t(null)}).start()}})})},o.TransitionsShow=function(){var e=cc.director.getScene().getChildByName("PersistRootNode"),t=null===e||void 0===e?void 0:e.getChildByName("gameTransitions");t&&cc.tween(t).to(1,{opacity:0}).call(function(e){t.removeFromParent()}).start()},o.setBtnClickAgain=function(e){var t=e.getComponent(cc.Button);t.enabled=!1,setTimeout(function(e){t.enabled=!0},200)},cc._RF.pop()},{"../Define":"Define"}],PhotoCollect:[function(e,t,o){"use strict";cc._RF.push(t,"f8a6ajLRhJMkJXD8PohSXYx","PhotoCollect");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,o,s):i(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../Base"),s=e("../components/AFloat"),a=e("../Define"),c=e("../utils/Data"),l=e("../utils/NodeHelp"),u=e("../utils/EventMgr"),d=cc._decorator,p=d.ccclass,f=d.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.pvPhotoBox=null,t.label_count=null,t.label_hint=null,t.pageindex=0,t.toggleContainer=null,t.nodePage=[],t.albumData=[],t.isFullViewer=!1,t.currentPhotoIndex=0,t}return n(t,e),t.prototype.start=function(){var e=this;console.warn("count:",this.pvPhotoBox.getCurrentPageIndex()),this.init(a.RULE.AJL);for(var t=0;t<this.toggleContainer.childrenCount;t++){this.toggleContainer.children[t].addComponent(s.default)}this.label_hint.string=c.getSysHint(575),setTimeout(function(t){l.setNodeHide(e.label_hint.node,1,!0)},3e3),cc.systemEvent.on("keydown",function(t){switch(t.keyCode){case cc.macro.KEY.left:if(e.isFullViewer)return e.photoBackward();e.onClickToLeft();break;case cc.macro.KEY.right:if(e.isFullViewer)return e.photoForward();e.onClickToRight()}},this)},t.prototype.init=function(e){u.default.addEventListener("photoview",this.onClickPhoto,this),this.pvPhotoBox.scrollToPage(0,.5),this.pageindex=0,this.setPageIndex(0);var t=c.getRuleCg(e),o=[];this.currentPhotoIndex=0,this.isFullViewer=!1,this.albumData=t,this.resetPageItem();for(var n=0;n<this.nodePage.length;n++)for(var i=this.nodePage[n],r=0;r<i.childrenCount;r++)o.push(i.children[r].children[0]);for(var s=0;s<o.length;s++)o[s].getComponent(cc.Sprite).spriteFrame=null;for(n=0;n<t.length;n++){if(0==o.length)return;(i=o.shift()).itemId=t[n],l.setNodeSpf("photo/"+t[n],i),i.on("touchstart",function(e){u.default.dispatchEvent("photoview",e.target.itemId)},this)}},t.prototype.resetPageItem=function(){for(var e=0;e<this.nodePage.length;e++)for(var t=this.nodePage[e],o=0;o<t.childrenCount;o++)t.children[o].children[0].off("touchstart")},t.prototype.onClickPhoto=function(e){var t=this;this.isFullViewer=!0,l.loadPrefab("prefabs/pfPhotoView").then(function(o){var n=cc.instantiate(o);t.node.addChild(n,100,"photoviewer"),l.setNodeSpf("photo/"+e,n.children[1]),t.currentPhotoIndex=t.getPhotoIndex(e),n.children[1].on("touchstart",function(){n.removeFromParent(),t.isFullViewer=!1},t)})},t.prototype.photoForward=function(){var e=this.node.getChildByName("photoviewer"),t=this.currentPhotoIndex+1;if(!(t>=this.albumData.length)){var o=this.albumData[t];l.setNodeSpf("photo/"+o,e.children[1]),this.currentPhotoIndex=t}},t.prototype.photoBackward=function(){var e=this.node.getChildByName("photoviewer"),t=this.currentPhotoIndex-1;if(!(t<0)){var o=this.albumData[t];l.setNodeSpf("photo/"+o,e.children[1]),this.currentPhotoIndex=t}},t.prototype.getPhotoIndex=function(e){return this.albumData.indexOf(e)},t.prototype.onClickToLeft=function(){var e=this.pageindex-1;e<0||(this.pageindex--,this.setPageIndex(e),this.pvPhotoBox.scrollToPage(e,.5))},t.prototype.onClickToRight=function(){var e=this.pageindex+1;e>3||(this.pageindex++,this.setPageIndex(e),this.pvPhotoBox.scrollToPage(e,.5))},t.prototype.setPageIndex=function(e){this.label_count.string=e+1+"/4"},t.prototype.onExchangeRule=function(e,t){this.init(+t)},t.prototype.onDestroy=function(){u.default.removeEventListener("photoview"),cc.systemEvent.off("keydown")},i([f(cc.PageView)],t.prototype,"pvPhotoBox",void 0),i([f(cc.Label)],t.prototype,"label_count",void 0),i([f(cc.Label)],t.prototype,"label_hint",void 0),i([f(cc.Node)],t.prototype,"toggleContainer",void 0),i([f([cc.Node])],t.prototype,"nodePage",void 0),t=i([p],t)}(r.default);o.default=h,cc._RF.pop()},{"../Base":"Base","../Define":"Define","../components/AFloat":"AFloat","../utils/Data":"Data","../utils/EventMgr":"EventMgr","../utils/NodeHelp":"NodeHelp"}],PlotData:[function(e,t,o){"use strict";cc._RF.push(t,"ee90czbHN5FsLbnwbD1q4Q9","PlotData"),Object.defineProperty(o,"__esModule",{value:!0}),o.getRuleHeadId=o.getPlotFromStory=o.getPreludeData=o.getStoryData=void 0;var n=e("../Config"),i=e("./PlotMap");function r(e){var t=e.length;return n.default.Sys_Story.filter(function(o){return o.storyid.slice(0,t)==e})}o.getStoryData=function(e,t){var o;"5"==t&&(t="4");var s=+t-1,a=i.default[e][s];switch(t){case"1":case"2":case"3":var c=n.default.Sys_Enemy.find(function(e){return e.id==a}),l=r(c.plot1),u=r(c.plot2);o=l.concat(u||[]);break;case"4":case"5":var d=n.default.Sys_GirlSm.find(function(e){return e.id==a});o=r("4"==t?d.ending1:d.ending2)}return o},o.getPreludeData=function(e,t){var o=+t-1,s=i.default[e][o],a=n.default.Sys_GirlSm.find(function(e){return e.id==s});return r("4"==t?a.plot1:a.plot2)},o.getPlotFromStory=r,o.getRuleHeadId=function(e){var t=n.default.Sys_Npc.find(function(t){return t.id==e});return t&&t.icon1},cc._RF.pop()},{"../Config":"Config","./PlotMap":"PlotMap"}],PlotHelp:[function(e,t,o){"use strict";cc._RF.push(t,"85193rA03tLDIQAGq5nH+Iw","PlotHelp");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,o,s):i(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,a=r.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t.text="hello",t}return n(t,e),t.prototype.start=function(){},i([a(cc.Label)],t.prototype,"label",void 0),i([a],t.prototype,"text",void 0),t=i([s],t)}(cc.Component);o.default=c,cc._RF.pop()},{}],PlotMap:[function(e,t,o){"use strict";cc._RF.push(t,"54281dnsltDqZzU+socBnJx","PlotMap"),Object.defineProperty(o,"__esModule",{value:!0}),o.default={1:["101","102","103","101"],2:["201","202","203","201"],3:["301","302","303","301"],4:["401","402","403","404"],5:["501","502","503","501"],6:["601","602","603","601"],7:["701","702","703","701"],8:["801","802","803","801"],9:["906","906","906","906"],10:["1001","1002","1003","1001"],11:["1101","1102","1103","1101"],12:["1201","1202","1203","1201"]},cc._RF.pop()},{}],PlotMgr:[function(e,t,o){"use strict";cc._RF.push(t,"cd805hBG+JCwYYeraSKVzrD","PlotMgr"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(e){this.ChatData=[],this.ChatData=e}return e.prototype.getData=function(){return this.ChatData},e.prototype.setData=function(e){this.ChatData=e},e.prototype.getAChat=function(){return this.ChatData.length>0?this.ChatData.shift():null},e}();o.default=n,cc._RF.pop()},{}],Plot:[function(e,t,o){"use strict";cc._RF.push(t,"988d0/C2v5AxqgG+bnXmFXw","Plot");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,o,s):i(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../Game"),s=e("../../Base"),a=e("../../utils/NodeHelp"),c=e("../../commom/PlotData"),l=e("../../components/PlotMgr"),u=e("../../components/TextOut"),d=e("../../utils/EventMgr"),p=e("../../utils/Data"),f=e("../../utils/SoundMgr"),h=e("../../commom/SpineMap"),y=e("../../components/Effect"),_=cc._decorator,m=_.ccclass,g=_.property,v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nodePlotSelect=null,t.nodeSpine=null,t.nodeBg=null,t.labelDialog=null,t.nodeDialog=null,t.label_plot1=null,t.label_plot2=null,t.nodeUserHead=null,t.ChatData=null,t.TextData=null,t.sceneId=null,t.currentSction=0,t.Spine=null,t}return n(t,e),t.prototype.init=function(e){var t=r.Game.currentRule,o=c.getStoryData(t,e);this.ChatData=new l.default(o),console.warn("\u5267\u60c5\u6570\u636e:",o),this.currentSction=+e;var n="spines/"+h.Stand[r.Game.currentRule];this.Spine=new y.Effect(n,this.nodeSpine),this.Spine.setNodeState(!1),this.addListenner(),this.createTextMgr(),a.TransitionsShow()},t.prototype.createTextMgr=function(){var e=this.ChatData.getAChat();if(!e)return console.warn("\u7ae0\u8282\u7ed3\u675f..."),void a.setNodeHide(this.node,1,!0).then(function(e){"girlSm"==cc.director.getScene().name&&d.default.dispatchEvent("event_girlSmPlotEnd")});var t=c.getRuleHeadId(e.roleId);if(this.setUserHead(t),this.TextData&&this.TextData.cancel(),this.TextData=new u.default(e[r.Game.language]),(null===e||void 0===e?void 0:e.cv)&&f.default.play("sound/"+e.cv),(null===e||void 0===e?void 0:e.sound)&&f.default.play("sound/"+e.sound),this.TextData.getAText(this.setChat.bind(this)).end=function(){},this.sceneId!=e.scene){console.warn("\u5207\u6362bg\uff1a"+this.sceneId+"==>>"+e.scene);var o="photo/"+e.scene;a.setNodeSpf(o,this.nodeBg),this.sceneId=e.scene}if(0!=e.effect&&"-1"!=e.effect?this.Spine.setNodeState(!0):this.Spine.setNodeState(!1),"shantizhendong"==e.sound&&a.nodeShake(this.node),e.option_cn){this.setSelectPlotState();var n=p.getOption(e);return this.setLabelPlot(n),void this.removeListenner()}},t.prototype.onUserSelectPlot=function(e,t){var o=this.ChatData.getData();if("2"==t)for(;;){if(o.shift().branch){this.ChatData.setData(o);break}}else{for(var n=0,i=[];o[n].branch&&i.push(n),2!=i.length;)n++;var r=i[0]+1,s=i[0]-1;console.warn("beginIndex",r),console.warn("endIndex",s),o.splice(r,s),this.ChatData.setData(o)}this.setSelectPlotState(),this.addListenner(),this.createTextMgr()},t.prototype.setChat=function(e){this.labelDialog&&(this.labelDialog.string=e)},t.prototype.addListenner=function(){var e=this;this.nodeDialog.on("touchstart",function(){e.createTextMgr()},this),cc.systemEvent.on("keydown",function(t){switch(t.keyCode){case cc.macro.KEY.ctrl:e.createTextMgr();break;case cc.macro.KEY.escape:a.showGameSet()}},this)},t.prototype.removeListenner=function(){this.nodeDialog.off("touchstart"),cc.systemEvent.off("keydown")},t.prototype.setUserHead=function(e){if(e){var t="head/"+e;a.setNodeSpf(t,this.nodeUserHead)}else this.nodeUserHead.getComponent(cc.Sprite).spriteFrame=null},t.prototype.setLabelPlot=function(e){this.label_plot1.string=e[0],this.label_plot2.string=e[1]},t.prototype.setSelectPlotState=function(){this.nodePlotSelect.active=!this.nodePlotSelect.active},i([g(cc.Node)],t.prototype,"nodePlotSelect",void 0),i([g(cc.Node)],t.prototype,"nodeSpine",void 0),i([g(cc.Node)],t.prototype,"nodeBg",void 0),i([g(cc.Label)],t.prototype,"labelDialog",void 0),i([g(cc.Node)],t.prototype,"nodeDialog",void 0),i([g(cc.Label)],t.prototype,"label_plot1",void 0),i([g(cc.Label)],t.prototype,"label_plot2",void 0),i([g(cc.Node)],t.prototype,"nodeUserHead",void 0),t=i([m],t)}(s.default);o.default=v,cc._RF.pop()},{"../../Base":"Base","../../Game":"Game","../../commom/PlotData":"PlotData","../../commom/SpineMap":"SpineMap","../../components/Effect":"Effect","../../components/PlotMgr":"PlotMgr","../../components/TextOut":"TextOut","../../utils/Data":"Data","../../utils/EventMgr":"EventMgr","../../utils/NodeHelp":"NodeHelp","../../utils/SoundMgr":"SoundMgr"}],RoleIdMap:[function(e,t,o){"use strict";cc._RF.push(t,"47fc481kKxDTZbtIXIQSMhH","RoleIdMap"),Object.defineProperty(o,"__esModule",{value:!0}),o.default={1:"101",2:"201",3:"301",4:"401",5:"501",6:"601",7:"701",8:"801",9:"906",10:"1001",11:"1101",12:"1201"},cc._RF.pop()},{}],RoleItem:[function(e,t,o){"use strict";cc._RF.push(t,"f259bQZ+e5Ah5d+Aj/3KRVJ","RoleItem");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,o,s):i(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../utils/EventMgr"),s=cc._decorator,a=s.ccclass,c=s.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nodeCollider=null,t.nodeLock=null,t.nodeMask=null,t.roleId=0,t.btn_ligth=null,t}return n(t,e),t.prototype.registEventListen=function(){this.nodeCollider.node.on("touchstart",function(e,t){var o=e.getLocation();cc.Intersection.pointInPolygon(o,this.nodeCollider.world.points)?r.default.dispatchEvent("user_click_role",this.roleId):console.log("\u65e0\u6548\u70b9\u51fb\uff0c\u4e0d\u5728\u76d1\u542c\u533a\u57df\u5185!")},this),this.btn_ligth.interactable=!0,this.nodeCollider.node._touchListener.setSwallowTouches(!1)},t.prototype.offListener=function(){this.nodeCollider.node.off("touchstart")},i([c(cc.PolygonCollider)],t.prototype,"nodeCollider",void 0),i([c(cc.Node)],t.prototype,"nodeLock",void 0),i([c(cc.Node)],t.prototype,"nodeMask",void 0),i([c],t.prototype,"roleId",void 0),i([c(cc.Button)],t.prototype,"btn_ligth",void 0),t=i([a],t)}(cc.Component);o.default=l,cc._RF.pop()},{"../../utils/EventMgr":"EventMgr"}],Role:[function(e,t,o){"use strict";cc._RF.push(t,"bdfb8Cot5xA+avm0RJgUoyE","Role");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,o,s):i(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../Base"),s=e("../../utils/EventMgr"),a=e("../../utils/NodeHelp"),c=e("../../utils/SceneMgr"),l=e("../../utils/StatusMgr"),u=e("../../commom/SpineMap"),d=e("../../Game"),p=e("../../components/Effect"),f=e("../../utils/Data"),h=cc._decorator,y=h.ccclass,_=h.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.roleSpine=null,t.label_intimacy=null,t.label_combat=null,t.tsHome=null,t.viewId=0,t}return n(t,e),t.prototype.onLoad=function(){f.getRoleInfo()},t.prototype.start=function(){var e=d.Game.currentRule>8?1:d.Game.currentRule,t="spines/"+u.Stand[e];new p.Effect(t,this.roleSpine);this.label_intimacy.string=d.Game.intimacy+"%",this.label_combat.string=d.Game.combatPgs+"/4"},t.prototype.onButtonEvent=function(e){var t=e.target.name;switch(a.setBtnClickAgain(e.target),t){case"btn_qmd":return this.showTiaoJiao();case"btn_zhandou":return c.default.loadScene("mainGame");case"btn_juqing":return this.showStory();case"btn_jieshao":return this.showRoleIntroduce()}},t.prototype.showTiaoJiao=function(){if(console.warn("\u8c03\u6559"),!(d.Game.intimacy<100))return d.Game.currentRule>8?a.showConfir("\u6682\u672a\u5f00\u653e"):void c.default.loadScene("girlSm")},t.prototype.showStory=function(){var e=this;console.warn("\u5267\u60c5\u7ae0\u8282"),0!=this.viewId&&a.loadPrefab("prefabs/pfStory").then(function(t){s.default.dispatchEvent("showStory",t),e.viewId=0})},t.prototype.showRoleIntroduce=function(){var e=this;1!=this.viewId&&a.loadPrefab("prefabs/pfInroduce").then(function(t){s.default.dispatchEvent("showInroduce",t),e.viewId=1})},t.prototype.onButtonExit=function(){var e=this;if(l.default.SELECT_ROLE){var t=this.tsHome.nodeLayer.getChildByName("story")||this.tsHome.nodeLayer.getChildByName("introduce");a.setNodeHide(this.tsHome.nodeContent2,2),a.setNodeHide(t,2,!0).then(function(t){e.tsHome.nodeContent2.active=!1,e.tsHome.nodeContent2.opacity=255,a.nodeMoveLeft(e.node,300).then(function(t){a.setNodeShow(e.tsHome.nodePowerLeft,1.5),a.setNodeShow(e.tsHome.nodePowerRight,1.5),l.default.SELECT_ROLE=!1,e.tsHome.nodeCheckp.active=!0})})}else this.node.removeFromParent()},i([_(cc.Node)],t.prototype,"roleSpine",void 0),i([_(cc.Label)],t.prototype,"label_intimacy",void 0),i([_(cc.Label)],t.prototype,"label_combat",void 0),t=i([y],t)}(r.default);o.default=m,cc._RF.pop()},{"../../Base":"Base","../../Game":"Game","../../commom/SpineMap":"SpineMap","../../components/Effect":"Effect","../../utils/Data":"Data","../../utils/EventMgr":"EventMgr","../../utils/NodeHelp":"NodeHelp","../../utils/SceneMgr":"SceneMgr","../../utils/StatusMgr":"StatusMgr"}],SceneMap:[function(e,t,o){"use strict";cc._RF.push(t,"592c3K/WbJLbZDPyouPvCJ0","SceneMap"),Object.defineProperty(o,"__esModule",{value:!0}),o.default={1:"1001",2:"10002",3:"10003",4:"10008",5:"20001",6:"20007",7:"20006",8:"30005",9:"30010",10:"30011",11:"30012",12:"30013"},cc._RF.pop()},{}],SceneMgr:[function(e,t,o){"use strict";cc._RF.push(t,"2f38aX1BqFFnoXQr+ug8GyZ","SceneMgr"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./NodeHelp"),i=function(){function e(){}return e.loadScene=function(e){this.currentSceneName=e,this.stackScene.push(e),n.TransitionsHide().then(function(t){cc.director.loadScene(e)})},e.getSceneName=function(){return this.currentSceneName},e.backScene=function(){var e=this.stackScene[this.stackScene.length-2];this.stackScene.pop(),this.currentSceneName=e,n.TransitionsHide().then(function(t){cc.director.loadScene(e)})},e.stackScene=["login"],e.currentSceneName="login",e}();o.default=i,cc._RF.pop()},{"./NodeHelp":"NodeHelp"}],ShopItemJian:[function(e,t,o){"use strict";cc._RF.push(t,"483f32v6F1NB63WGJP6Rr4S","ShopItemJian");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,o,s):i(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,a=r.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t.text="hello",t}return n(t,e),t.prototype.start=function(){},i([a(cc.Label)],t.prototype,"label",void 0),i([a],t.prototype,"text",void 0),t=i([s],t)}(cc.Component);o.default=c,cc._RF.pop()},{}],ShopItem:[function(e,t,o){"use strict";cc._RF.push(t,"0dfafz4NNNLhatrWwFaVp2+","ShopItem");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,o,s):i(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../utils/EventMgr"),s=e("../../utils/Data"),a=e("../../utils/NodeHelp"),c=e("../../I18n"),l=cc._decorator,u=l.ccclass,d=l.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t.icon=null,t.line=null,t.itemData=null,t}return n(t,e),t.prototype.init=function(e){this.itemData=e,this.label.string=e.abyssScore,a.setNodeSpf("home/skills/"+e.iconId,this.icon),this.node.itemId=e.id,this.node.on("mouseenter",function(e){var t=e.target;a.showHint(t,c.I18n.getShopAbilityDesc(t.itemId)),cc.tween(t).to(.05,{scale:1.1}).start()},this),this.node.on("mouseleave",function(e){e.target.setScale(1),a.removeHint()},this),s.Skill.getSelfHasSkill(e.id)?this.line.active=!0:this.node.on("touchstart",function(){r.default.dispatchEvent("onUserBuy",this.itemData)},this)},t.prototype.showLine=function(){this.line.active=!0,this.node.off("touchstart")},i([d(cc.Label)],t.prototype,"label",void 0),i([d(cc.Node)],t.prototype,"icon",void 0),i([d(cc.Node)],t.prototype,"line",void 0),t=i([u],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../../I18n":"I18n","../../utils/Data":"Data","../../utils/EventMgr":"EventMgr","../../utils/NodeHelp":"NodeHelp"}],Shop:[function(e,t,o){"use strict";cc._RF.push(t,"68d06T2T81P5q+nNs8zJZfi","Shop");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,o,s):i(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../Base"),s=e("../../Config"),a=e("../../utils/EventMgr"),c=e("../../utils/Data"),l=e("../../Game"),u=e("../../utils/NodeHelp"),d=cc._decorator,p=d.ccclass,f=d.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nodeContent=null,t.nodeContent_jian=null,t.pfItem=null,t.pfItem_jian=null,t.viewId=1,t}return n(t,e),t.prototype.start=function(){this.init(s.default.Sys_Zshop),a.default.addEventListener("onUserBuy",this.onUserBuy,this)},t.prototype.init=function(e){this.viewId=2;var t=s.default.Sys_Item.slice(1,12);this.nodeContent_jian.active=!1,this.nodeContent.active=!0,this.nodeContent.removeAllChildren();for(var o=0;o<t.length;o++){var n=cc.instantiate(this.pfItem);this.nodeContent.addChild(n),n.getComponent("ShopItem").init(t[o])}},t.prototype.initJian=function(){this.nodeContent_jian.active=!0,this.nodeContent.active=!1},t.prototype.updateItemState=function(e){for(var t=0;t<this.nodeContent.childrenCount;t++){if(e==this.nodeContent.children[t].itemId)this.nodeContent.children[t].getComponent("ShopItem").showLine()}},t.prototype.onUserBuy=function(e){var t=+e.abyssScore;l.Game.userScore>t?(1==this.viewId?c.Skill.addSelfHasSkill1(e.id):2==this.viewId&&c.Skill.addSelfHasSkill2(e.id),c.updateUserScore(l.Game.userScore-t),a.default.dispatchEvent("exchange_user_score"),this.updateItemState(e.id)):u.showAlert("\u79ef\u5206\u4e0d\u591f!")},t.prototype.onButtonEvent=function(e,t){switch(console.warn("\u5207\u6362\u5546\u754c\u9762\uff1a",t),t){case"1":this.viewId=1,this.init(s.default.Sys_Zshop);break;case"2":this.viewId=2,this.init(s.default.Sys_Item.slice(1,12));break;case"3":this.initJian()}},i([f(cc.Node)],t.prototype,"nodeContent",void 0),i([f(cc.Node)],t.prototype,"nodeContent_jian",void 0),i([f(cc.Prefab)],t.prototype,"pfItem",void 0),i([f(cc.Prefab)],t.prototype,"pfItem_jian",void 0),t=i([p],t)}(r.default);o.default=h,cc._RF.pop()},{"../../Base":"Base","../../Config":"Config","../../Game":"Game","../../utils/Data":"Data","../../utils/EventMgr":"EventMgr","../../utils/NodeHelp":"NodeHelp"}],SkillBox1:[function(e,t,o){"use strict";cc._RF.push(t,"ae14315RFxO6K9Q9Wfk3rsT","SkillBox1");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,o,s):i(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../Base"),s=cc._decorator,a=s.ccclass,c=s.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nodeContent=null,t.pfItem=null,t.spfBg=[],t}return n(t,e),t.prototype.init=function(e){console.warn("skillbox1111",e),this.nodeContent.removeAllChildren();for(var t=0;t<3;t++){var o=cc.instantiate(this.pfItem);if(this.nodeContent.addChild(o),e[t])o.itemId=e[t].id,o.getComponent("SkillBoxItem1").init(e[t]);else o.getChildByName("icon").getComponent(cc.Sprite).spriteFrame=this.spfBg[this.node.itemId]}},i([c(cc.Node)],t.prototype,"nodeContent",void 0),i([c(cc.Prefab)],t.prototype,"pfItem",void 0),i([c([cc.SpriteFrame])],t.prototype,"spfBg",void 0),t=i([a],t)}(r.default);o.default=l,cc._RF.pop()},{"../../Base":"Base"}],SkillBoxItem1:[function(e,t,o){"use strict";cc._RF.push(t,"16807OmuupKapS8j5Ldls/s","SkillBoxItem1");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,o,s):i(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../utils/NodeHelp"),s=e("../../I18n"),a=e("../../utils/EventMgr"),c=e("../../utils/Data"),l=cc._decorator,u=l.ccclass,d=l.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.icon=null,t.e=null,t}return n(t,e),t.prototype.init=function(e){var t=this,o=e.icon;r.setNodeSpf("home/skills/"+o,this.icon),this.node.on("mouseenter",function(e){var t=e.target;r.showHint(t,s.I18n.getAbilityDesc(t.itemId)),cc.tween(t).to(.05,{scale:1.1}).start()},this),this.node.on("mouseleave",function(e){e.target.setScale(1),r.removeHint()},this),c.Skill.getIsEquipped(this.node.itemId)?this.e.active=!0:this.node.on("touchstart",function(){a.default.dispatchEvent("updateSkillBox1",t.node.itemId)},this)},i([d(cc.Node)],t.prototype,"icon",void 0),i([d(cc.Node)],t.prototype,"e",void 0),t=i([u],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../../I18n":"I18n","../../utils/Data":"Data","../../utils/EventMgr":"EventMgr","../../utils/NodeHelp":"NodeHelp"}],SkillBoxItem:[function(e,t,o){"use strict";cc._RF.push(t,"7ce52h+QABPp7Yj3bkqQPkO","SkillBoxItem");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,o,s):i(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../utils/NodeHelp"),s=e("../../I18n"),a=e("../../Config"),c=e("../../utils/EventMgr"),l=e("../../utils/Data"),u=cc._decorator,d=u.ccclass,p=u.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.icon=null,t.e=null,t}return n(t,e),t.prototype.start=function(){var e=this,t=a.default.Sys_Item.find(function(t){return t.id==e.node.itemId});if(t){var o=t.iconId;r.setNodeSpf("home/skills/"+o,this.icon),this.node.on("mouseenter",function(e){var t=e.target;r.showHint(t,s.I18n.getAbilityDesc2(t.itemId)),cc.tween(t).to(.05,{scale:1.1}).start()},this),this.node.on("mouseleave",function(e){e.target.setScale(1),r.removeHint()},this),l.Skill.getIsEquipped(this.node.itemId)?this.e.active=!0:this.node.on("touchstart",function(){c.default.dispatchEvent("updateCarry",e.node.itemId)},this)}},i([p(cc.Node)],t.prototype,"icon",void 0),i([p(cc.Node)],t.prototype,"e",void 0),t=i([d],t)}(cc.Component);o.default=f,cc._RF.pop()},{"../../Config":"Config","../../I18n":"I18n","../../utils/Data":"Data","../../utils/EventMgr":"EventMgr","../../utils/NodeHelp":"NodeHelp"}],SkillBox:[function(e,t,o){"use strict";cc._RF.push(t,"07c91O9j+9Dj7VGjuZqF8Gb","SkillBox");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,o,s):i(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../Base"),s=e("../../utils/Data"),a=cc._decorator,c=a.ccclass,l=a.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nodeContent=null,t.pfItem=null,t}return n(t,e),t.prototype.start=function(){this.init()},t.prototype.init=function(){var e=s.Skill.getSelfHasSkill2();this.nodeContent.removeAllChildren();for(var t=0;t<e.length;t++){var o=cc.instantiate(this.pfItem);this.nodeContent.addChild(o),o.itemId=e[t]}},i([l(cc.Node)],t.prototype,"nodeContent",void 0),i([l(cc.Prefab)],t.prototype,"pfItem",void 0),t=i([c],t)}(r.default);o.default=u,cc._RF.pop()},{"../../Base":"Base","../../utils/Data":"Data"}],SmConfig:[function(e,t,o){"use strict";cc._RF.push(t,"5eabbH6jq1B74A5WYULAbuM","SmConfig"),Object.defineProperty(o,"__esModule",{value:!0}),o.default={504:{id:"504",name:"\u8c03\u6559\u6697\u7cbe\u7075\u81ea\u7531\u6a21\u5f0f",10101:[{pos:"790_1000/770_990",score:"100_50",sound:"tj501_1",ani:"501_2_10101",area:0,style:0},{pos:"730_950/510_680",score:"100_50",sound:"tj501_1",ani:"501_3_10101",area:0,style:0},{pos:"1330_1480/480_630",score:"100_50",sound:"tj501_1",ani:"501_7_10101",area:0,style:0},{pos:"1100_1350/200_400",score:"100_50",sound:"tj501_1",ani:"501_8_10101",area:0,style:0}],10102:[{pos:"790_1000/770_990",score:"100_50",sound:"tj501_2",ani:"501_2_10102",area:0,style:0},{pos:"730_950/510_680",score:"100_50",sound:"tj501_2",ani:"501_3_10102",area:0,style:0}],10103:[{pos:"790_1000/770_990",score:"100_50",sound:"tj501_3",ani:"501_2_10103",area:0,style:0},{pos:"730_950/510_680",score:"100_50",sound:"tj501_3",ani:"501_3_10103",area:0,style:0},{pos:"1130_1260/480_570",score:"100_50",sound:"tj501_3",ani:"501_9_10103",area:0,style:0}]},204:{id:"204",name:"\u8c03\u6559\u5deb\u5973\u81ea\u7531\u6a21\u5f0f",10201:[{pos:"850_1000/560_716",score:"100_50",sound:"tj201_1",ani:"201_3_10201_",area:0,style:1},{pos:"1048_1200/520_650",score:"100_50",sound:"tj201_1",ani:"201_2_10201_",area:0,style:1},{pos:"680_830/160_310",score:"100_50",sound:"tj201_2",ani:"201_8_10201_",area:0,style:1},{pos:"1030_1200/160_300",score:"100_50",sound:"tj201_2",ani:"201_7_10201_",area:0,style:1},{pos:"940_1030/270_330",score:"100_50",sound:"tj201_3",ani:"201_9_10201_",area:2,style:1}],10202:[{pos:"850_1200/560_716",score:"100_50",sound:"tj201_1",ani:"201_3_10202_",area:0,style:1},{pos:"940_1030/270_330",score:"100_50",sound:"tj201_1",ani:"201_9_10202_",area:2,style:1}],10203:[{pos:"850_1000/560_716",score:"100_50",sound:"tj201_1",ani:"201_3_10203_",area:2,style:1},{pos:"1048_1200/520_650",score:"100_50",sound:"tj201_1",ani:"201_2_10203_",area:2,style:1},{pos:"940_1030/270_330",score:"100_50",sound:"tj201_2",ani:"201_9_10203_",area:2,style:1}]},304:{id:"304",name:"\u8c03\u6559\u50f5\u5c38\u81ea\u7531\u6a21\u5f0f",10301:[{pos:"860_1025/490_590",score:"100_50",sound:"tj301_2",ani:"301_2_10301",area:0,style:0},{pos:"760_1030/270_440",score:"100_50",sound:"tj301_1",ani:"301_7_10301",area:0,style:0},{pos:"530_725/580_600",score:"100_50",sound:"tj301_1",ani:"301_8_10301",area:0,style:0}],10302:[{pos:"860_1025/490_590",score:"100_50",sound:"tj301_2",ani:"301_2_10302",area:0,style:0},{pos:"760_1030/270_440",score:"100_50",sound:"tj301_1",ani:"301_7_10302",area:0,style:0},{pos:"530_725/580_600",score:"100_50",sound:"tj301_1",ani:"301_8_10302",area:0,style:0},{pos:"530_740/410_540",score:"100_50",sound:"tj301_2",ani:"301_9_10302",area:0,style:0}],10303:[{pos:"860_1025/490_590",score:"100_50",sound:"tj301_2",ani:"301_2_10303",area:0,style:0},{pos:"760_1030/270_440",score:"100_50",sound:"tj301_2",ani:"301_7_10303",area:0,style:0},{pos:"530_725/580_600",score:"100_50",sound:"tj301_2",ani:"301_8_10303",area:0,style:0},{pos:"530_740/410_540",score:"100_50",sound:"tj301_2",ani:"301_9_10303",area:0,style:0}]},104:{id:"104",name:"\u8c03\u6559\u9f99\u5973\u4ec6\u81ea\u7531\u6a21\u5f0f",10401:[{pos:"680_900/465_620",score:"100_50",sound:"tj101_2",ani:"101_7_10401",area:0,style:0},{pos:"1230_1410/420_560",score:"100_50",sound:"tj101_2",ani:"101_8_10401",area:0,style:0},{pos:"1010_1200/470_650",score:"100_50",sound:"tj101_2",ani:"101_9_10401",area:0,style:0}],10402:[{pos:"825_1000/710_790",score:"100_50",sound:"tj101_2",ani:"101_4_10402",area:0,style:0},{pos:"1160_1300/710_820",score:"100_50",sound:"tj101_2",ani:"101_5_10402",area:0,style:0},{pos:"1010_1200/470_650",score:"100_50",sound:"tj101_2",ani:"101_9_10402",area:0,style:0}],10403:[{pos:"500_680/825_970",score:"100_50",sound:"tj101_2",ani:"101_1_10403",area:0,style:0},{pos:"1010_1200/470_650",score:"100_50",sound:"tj101_2",ani:"101_9_10403",area:0,style:0}]},804:{id:"804",name:"\u8c03\u6559\u5973\u517d\u4eba\u81ea\u7531\u6a21\u5f0f",10501:[{pos:"850_1040/685_820",score:"100_50",sound:"tj801_2",ani:"801_3_10501",area:0,style:0},{pos:"1148_1290/740_870",score:"100_50",sound:"tj801_2",ani:"801_2_10501",area:0,style:0},{pos:"750_1060/190_500",score:"100_50",sound:"tj801_2",ani:"801_9_10501",area:0,style:0}],10502:[{pos:"850_1040/685_820",score:"100_50",sound:"tj801_2",ani:"801_3_10502",area:0,style:0},{pos:"1148_1290/740_870",score:"100_50",sound:"tj801_2",ani:"801_2_10502",area:0,style:0},{pos:"750_1060/190_500",score:"100_50",sound:"tj801_2",ani:"801_9_10502",area:0,style:0}],10503:[{pos:"750_1060/190_500",score:"100_50",sound:"tj801_3",ani:"801_9_10503",area:0,style:0}]},704:{id:"704",name:"\u8c03\u6559\u5973\u6218\u58eb\u81ea\u7531\u6a21\u5f0f",10601:[{pos:"750_1100/20_140",score:"100_50",sound:"tj701_1",ani:"701_7_10601",area:0,style:0},{pos:"1300_1570/100_270",score:"100_50",sound:"tj701_1",ani:"701_8_10601",area:0,style:0},{pos:"1330_1510/360_550",score:"100_50",sound:"tj701_1",ani:"701_9_10601",area:0,style:0}],10602:[{pos:"1050_1280/410_600",score:"100_50",sound:"tj701_3",ani:"701_4_10602",area:0,style:0},{pos:"1475_1590/360_520",score:"100_50",sound:"tj701_3",ani:"701_5_10602",area:0,style:0},{pos:"1320_1450/290_390",score:"100_50",sound:"tj701_3",ani:"701_9_10602_1",area:0,style:0}],10603:[{pos:"1180_1540/330_620",score:"100_50",sound:"tj701_3",ani:"701_4_10603_2",area:2,style:0}]},604:{id:"604",name:"\u8c03\u6559\u5973\u738b\u81ea\u7531\u6a21\u5f0f",10701:[{pos:"780_980/600_760",score:"100_50",sound:"tj601_2",ani:"601_3_10701",area:0,style:0},{pos:"1065_1265/590_780",score:"100_50",sound:"tj601_2",ani:"601_2_10701",area:0,style:0},{pos:"465_690/280_500",score:"100_50",sound:"tj601_2",ani:"601_8_10701",area:0,style:0},{pos:"1210_1440/220_450",score:"100_50",sound:"tj601_2",ani:"601_7_10701",area:0,style:0},{pos:"840_1050/55_360",score:"100_50",sound:"tj601_2",ani:"601_9_10701",area:0,style:0}],10702:[{pos:"1010_1160/780_960",score:"100_50",sound:"tj601_1",ani:"601_1_10702",area:0,style:0},{pos:"840_1050/55_360",score:"100_50",sound:"tj601_1",ani:"601_9_10702",area:0,style:0}],10703:[{pos:"860_1220/580_800",score:"100_50",sound:"tj601_2",ani:"601_3_10703",area:0,style:0},{pos:"840_1050/55_360",score:"100_50",sound:"tj601_2",ani:"601_9_10703",area:0,style:0}]},404:{id:"404",name:"\u8c03\u6559\u5973\u795e\u5b98\u81ea\u7531\u6a21\u5f0f",10802:[{pos:"940_1050/430_550",score:"100_50",sound:"tj401_3",ani:"401_6_10802",area:0,style:0},{pos:"560_790/320_450",score:"100_50",sound:"tj401_2",ani:"401_9_10802",area:0,style:0}],10801:[{pos:"1180_1380/440_610",score:"100_50",sound:"tj401_2",ani:"401_3_10801",area:0,style:0},{pos:"890_1100/630_790",score:"100_50",sound:"tj401_2",ani:"401_2_10801",area:0,style:0},{pos:"680_890/90_280",score:"100_50",sound:"tj401_2",ani:"401_8_10801",area:0,style:0},{pos:"560_790/320_450",score:"100_50",sound:"tj401_2",ani:"401_9_10801",area:0,style:0}],10803:[{pos:"1180_1380/440_610",score:"100_50",sound:"tj401_2",ani:"401_2_10803",area:0,style:0},{pos:"890_1100/630_790",score:"100_50",sound:"tj401_2",ani:"401_3_10803",area:0,style:0},{pos:"1180_1300/780_920",score:"100_50",sound:"tj401_2",ani:"401_1_10803",area:0,style:0},{pos:"560_790/320_450",score:"100_50",sound:"tj401_2",ani:"401_9_10803",area:0,style:0}]},904:{id:"904",name:"\u8c03\u6559\u5973\u9ad8\u4e2d\u751f\u81ea\u7531\u6a21\u5f0f",pos:"0.61,-0.95,-14.38",time:"6.3"},1004:{id:"1004",name:"\u8c03\u6559\u4eba\u9020\u4eba\u81ea\u7531\u6a21\u5f0f",pos:"0.61,-0.53,-14.38",time:"6.0"},1104:{id:"1104",name:"\u8c03\u6559\u9b54\u5973\u81ea\u7531\u6a21\u5f0f",pos:"0.61,0.9,-14.38",time:"5.7"},1204:{id:"1204",name:"\u8c03\u6559\u517d\u8033\u5974\u96b6\u81ea\u7531\u6a21\u5f0f",pos:"0.61,-0.64,-14.38"}},cc._RF.pop()},{}],SmGuid:[function(e,t,o){"use strict";cc._RF.push(t,"f9ce2l5sWxK7q6FnQ2m7wHu","SmGuid");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,o,s):i(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../Config"),s=e("../../components/TextOut"),a=e("../../Game"),c=e("../../utils/StatusMgr"),l=e("../../utils/EventMgr"),u=e("../../utils/Data"),d=cc._decorator,p=d.ccclass,f=d.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t.label_branch1=null,t.label_branch2=null,t.nodeBranch=null,t.arrData=[],t}return n(t,e),t.prototype.start=function(){var e=this;this.arrData=r.default.Sys_Story.filter(function(e){return 110001==e.id||110002==e.id||110003==e.id});var t=this.arrData.shift();new s.default(t[a.Game.language]).getAText(function(t){e.label.string=t}).end=function(){setTimeout(function(){e.nodeBranch.active=!0;var o=u.getOption(t);e.label_branch1.string=o[0],e.label_branch2.string=o[1]},500)}},t.prototype.onButtonEvent=function(e,t){var o,n=this;this.nodeBranch.active=!1,"branch1"==t?(o=this.arrData[0],c.default.GIRL_SM_BRANCH="4",c.default.SM_MODULE=0,console.warn("\u5267\u60c5\u8c03\u6559")):(o=this.arrData[1],c.default.GIRL_SM_BRANCH="5",c.default.SM_MODULE=1,console.warn("\u81ea\u7531\u8c03\u6559")),new s.default(o[a.Game.language]).getAText(function(e){n.label.string=e}).end=function(){console.warn("\u9032\u5165\u8abf\u6559"),l.default.dispatchEvent("event_girlSmGuidEnd")}},i([f(cc.Label)],t.prototype,"label",void 0),i([f(cc.Label)],t.prototype,"label_branch1",void 0),i([f(cc.Label)],t.prototype,"label_branch2",void 0),i([f(cc.Node)],t.prototype,"nodeBranch",void 0),t=i([p],t)}(cc.Component);o.default=h,cc._RF.pop()},{"../../Config":"Config","../../Game":"Game","../../components/TextOut":"TextOut","../../utils/Data":"Data","../../utils/EventMgr":"EventMgr","../../utils/StatusMgr":"StatusMgr"}],SmMap:[function(e,t,o){"use strict";cc._RF.push(t,"af5b935zjBDpZEh2WNXuXCX","SmMap"),Object.defineProperty(o,"__esModule",{value:!0}),o.default={1:["101","104"],2:["201","204"],3:["301","304"],4:["401","404"],5:["501","504"],6:["601","604"],7:["701","704"],8:["801","804"],9:["906","906"],10:["1001","1004"],11:["1101","1104"],12:["1201","1204"]},cc._RF.pop()},{}],SmPrelude:[function(e,t,o){"use strict";cc._RF.push(t,"8420cZd/XRNuoyHdaz9r8tk","SmPrelude");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,o,s):i(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../Game"),s=e("../../Base"),a=e("../../utils/NodeHelp"),c=e("../../commom/PlotData"),l=e("../../components/PlotMgr"),u=e("../../components/TextOut"),d=e("../../utils/StatusMgr"),p=e("../../utils/EventMgr"),f=e("../../utils/Data"),h=e("../../utils/SoundMgr"),y=e("../../Config"),_=e("../../commom/SceneMap"),m=e("../../commom/SpineMap"),g=e("../../components/Effect"),v=cc._decorator,S=v.ccclass,b=v.property,C=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nodePlotSelect=null,t.nodeSpine=null,t.nodeBg=null,t.labelDialog=null,t.nodeDialog=null,t.label_plot1=null,t.label_plot2=null,t.nodeUserHead=null,t.ChatData=null,t.TextData=null,t.sceneId=null,t.currentSction=0,t}return n(t,e),t.prototype.start=function(){var e=d.default.GIRL_SM_BRANCH,t=r.Game.currentRule,o=c.getPreludeData(t,e);this.ChatData=new l.default(o),this.currentSction=+e,this.addListenner(),this.createTextMgr();var n="sound/"+y.default.Sys_Scene.find(function(e){return e.id==_.default[t]}).bgm;h.default.play(n,!0,.4);var i="spines/"+m.Sm[r.Game.currentRule],s=new g.Effect(i,this.nodeSpine);2==r.Game.currentRule?(s.setSkin("default"),s.setAnim("\u5f85\u673a1")):s.setSkin("\u7a7f\u8863")},t.prototype.createTextMgr=function(){var e=this.ChatData.getAChat();if(e){var t=c.getRuleHeadId(e.roleId);if(this.setUserHead(t),this.TextData&&this.TextData.cancel(),(null===e||void 0===e?void 0:e.cv)&&h.default.play("sound/"+e.cv),this.TextData=new u.default(e[r.Game.language]),this.TextData.getAText(this.setChat.bind(this)).end=function(){},this.sceneId!=e.scene){var o="photo/"+e.scene;a.setNodeSpf(o,this.nodeBg),this.sceneId=e.scene}if(e.effect?this.nodeSpine.active=!0:this.nodeSpine.active=!1,e.option_cn){this.setSelectPlotState();var n=f.getOption(e);return this.setLabelPlot(n),void this.removeListenner()}}else a.TransitionsHide().then(function(e){p.default.dispatchEvent("event_girlSmPreludeEnd")})},t.prototype.onUserSelectPlot=function(e,t){var o=this.ChatData.getData();if("2"==t){for(;;){if(o.shift().branch){this.ChatData.setData(o);break}}r.Game.pleasure=150}else{for(var n=0;!o[n].branch;)n++;var i=n+1;console.warn("beginIndex",i),o.splice(i),this.ChatData.setData(o),r.Game.pain=150}this.setSelectPlotState(),this.addListenner(),this.createTextMgr()},t.prototype.setChat=function(e){this.labelDialog&&(this.labelDialog.string=e)},t.prototype.addListenner=function(){var e=this;this.nodeDialog.on("touchstart",function(){e.createTextMgr()},this),cc.systemEvent.on("keydown",function(t){switch(t.keyCode){case cc.macro.KEY.ctrl:e.createTextMgr();break;case cc.macro.KEY.escape:a.showGameSet()}},this)},t.prototype.removeListenner=function(){this.nodeDialog.off("touchstart"),cc.systemEvent.off("keydown")},t.prototype.setUserHead=function(e){if(e){var t="head/"+e;a.setNodeSpf(t,this.nodeUserHead)}else this.nodeUserHead.getComponent(cc.Sprite).spriteFrame=null},t.prototype.setLabelPlot=function(e){this.label_plot1.string=e[0],this.label_plot2.string=e[1]},t.prototype.setSelectPlotState=function(){this.nodePlotSelect.active=!this.nodePlotSelect.active},t.prototype.onDisable=function(){this.removeListenner()},i([b(cc.Node)],t.prototype,"nodePlotSelect",void 0),i([b(cc.Node)],t.prototype,"nodeSpine",void 0),i([b(cc.Node)],t.prototype,"nodeBg",void 0),i([b(cc.Label)],t.prototype,"labelDialog",void 0),i([b(cc.Node)],t.prototype,"nodeDialog",void 0),i([b(cc.Label)],t.prototype,"label_plot1",void 0),i([b(cc.Label)],t.prototype,"label_plot2",void 0),i([b(cc.Node)],t.prototype,"nodeUserHead",void 0),t=i([S],t)}(s.default);o.default=C,cc._RF.pop()},{"../../Base":"Base","../../Config":"Config","../../Game":"Game","../../commom/PlotData":"PlotData","../../commom/SceneMap":"SceneMap","../../commom/SpineMap":"SpineMap","../../components/Effect":"Effect","../../components/PlotMgr":"PlotMgr","../../components/TextOut":"TextOut","../../utils/Data":"Data","../../utils/EventMgr":"EventMgr","../../utils/NodeHelp":"NodeHelp","../../utils/SoundMgr":"SoundMgr","../../utils/StatusMgr":"StatusMgr"}],SoundMgr:[function(e,t,o){"use strict";cc._RF.push(t,"34c59+sfRFEYZY9Il0G1gYu","SoundMgr"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){}return e.init=function(){var e=cc.sys.localStorage.getItem("fMusicVoice")||1,t=cc.sys.localStorage.getItem("fSoundVoice")||1;this.fMusicValue=+e,this.fSoundVlaue=+t},e.play=function(e,t,o){var n=this;void 0===o&&(o=1),cc.resources.load(e,cc.AudioClip,function(i,r){i?console.warn(" "+e+" not found!"):t?(n.bAudioPlaying&&cc.audioEngine.stopAll(),n.bAudioPlaying=!0,n.nMusicID=cc.audioEngine.play(r,!0,n.fMusicValue*o)):n.fSoundVlaue>0&&(1===n.getState(n.nSoundID)&&n.stopEffect(n.nSoundID),n.nSoundID=cc.audioEngine.play(r,!1,n.fSoundVlaue))})},e.stopBgMusic=function(){this.stopAudioID(this.nMusicID)},e.setSoundValue=function(e){this.fSoundVlaue=e},e.setMusicValue=function(e){this.fMusicValue=e},e.getMusicValue=function(){return this.fMusicValue},e.chanageVolume=function(){cc.audioEngine.setVolume(this.nSoundID,this.fSoundVlaue),cc.audioEngine.setVolume(this.nMusicID,this.fMusicValue)},e.pauseAudioID=function(e){cc.audioEngine.pause(e)},e.pauseAll=function(){cc.audioEngine.pauseAll()},e.resumeAudioID=function(e){cc.audioEngine.resume(e)},e.resumeAll=function(){cc.audioEngine.resumeAll()},e.stopAudioID=function(e){cc.audioEngine.stop(e)},e.stopAll=function(){cc.audioEngine.stopAll()},e.stopEffect=function(e){cc.audioEngine.stopEffect(e)},e.getState=function(e){return cc.audioEngine.getState(e)},e.nSoundID=65535,e.nMusicID=65535,e.fSoundVlaue=1,e.fMusicValue=1,e.bAudioPlaying=!1,e}();o.default=n,n.init(),cc._RF.pop()},{}],SpineMap:[function(e,t,o){"use strict";cc._RF.push(t,"e0b21kvQHhOH7/1mET//qla","SpineMap"),Object.defineProperty(o,"__esModule",{value:!0}),o.Sm=o.Stand=void 0,o.Stand={1:"longnvtuzhanli",2:"wunvzhanli",3:"jiangshizhanli",4:"nvshenguangzhanli",5:"nvcike",6:"nvwangzhanli",7:"nvzhanshizhanli",8:"nvshourenzhanli",9:"meimozhanli"},o.Sm={1:"longnvtutiaojiao",2:"wunvtiaojiao",3:"jiangshitiaojiao",4:"nvshenguangtiaojiao",5:"ciketiaojiao",6:"nvwangtiaojiao",7:"nvzhanshitiaojiao",8:"nvshourentiaojiao"},cc._RF.pop()},{}],StatusMgr:[function(e,t,o){"use strict";cc._RF.push(t,"f945aS6ffFAS4sai4AeW9RT","StatusMgr"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){}return e.FIRST_PALY=!0,e.SELECT_ROLE=!1,e.SECOND_VIEW_STACK=[],e.GIRL_SM_BRANCH="",e.SM_MODULE=0,e}();o.default=n,cc._RF.pop()},{}],Stroy:[function(e,t,o){"use strict";cc._RF.push(t,"53410pYf91MP7Ycyl0/vbq/","Stroy");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,o,s):i(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../utils/Data"),s=e("../../utils/NodeHelp"),a=e("../../utils/StatusMgr"),c=cc._decorator,l=c.ccclass,u=c.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.LabelSction=[],t}return n(t,e),t.prototype.start=function(){this.LabelSction[0].string=r.getSysHint(569),this.LabelSction[1].string=r.getSysHint(570),this.LabelSction[2].string=r.getSysHint(571),this.LabelSction[3].string=r.getSysHint(572),this.LabelSction[4].string=r.getSysHint(573)},t.prototype.onButtonEvent=function(e,t){a.default.SECOND_VIEW_STACK.push("game_plot"),s.TransitionsHide().then(function(e){s.showPlot().then(function(e){e.getComponent("Plot").init(t)})})},i([u([cc.Label])],t.prototype,"LabelSction",void 0),t=i([l],t)}(cc.Component);o.default=d,cc._RF.pop()},{"../../utils/Data":"Data","../../utils/NodeHelp":"NodeHelp","../../utils/StatusMgr":"StatusMgr"}],Sys_skillclassify:[function(e,t,o){"use strict";cc._RF.push(t,"8a944Z1BypAtZ8oV8Qu3OQH","Sys_skillclassify"),Object.defineProperty(o,"__esModule",{value:!0}),o.getTriggerType=void 0;var n=e("../Config");o.getTriggerType=function(e){return n.default.Sys_Ability.filter(function(t){return t.triggerType==e})},cc._RF.pop()},{"../Config":"Config"}],TextOut:[function(e,t,o){"use strict";cc._RF.push(t,"2def7uDb/FHEaubGnAsQe7v","TextOut"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(e){this.arrayText=[],this.end=null,this.intervalId=null,this.joinText="",this.arrayText=e.split("")}return e.prototype.getAText=function(e){var t=this;return this.intervalId=setInterval(function(){var o=t.arrayText.shift();o?e(t.joinText+=o):(clearInterval(t.intervalId),t.end()&&t.end())},80),this},e.prototype.cancel=function(){clearInterval(this.intervalId)},e}();o.default=n,cc._RF.pop()},{}],Update:[function(e,t,o){"use strict";cc._RF.push(t,"5db58lsrDJBd6Rfz7iTNHAR","Update");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,o,s):i(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,a=r.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t.label2=null,t.fileProgress=null,t.versionUrl=null,t.manifestUrl=null,t._updating=!1,t._canRetry=!1,t._storagePath="",t._am=null,t._updateListener=null,t._checkListener=null,t._failCount=0,t.newVersion=[],t.versionManifestUrl="",t.nodeBg=null,t}return n(t,e),t.prototype.start=function(){return cc.director.loadScene("login")},t.prototype.initAssetsManager=function(){this._storagePath=(jsb.fileUtils?jsb.fileUtils.getWritablePath():"/")+"remoteAsset",this._am=new jsb.AssetsManager(this.versionManifestUrl,this._storagePath),this._am.setVerifyCallback(function(e,t){t.compressed,t.md5,t.path,t.size;return!0}),this.startUpdate()},t.prototype.versionCompare=function(e,t){for(var o=e.split("."),n=t.split("."),i=0;i<o.length;i++){if((0|o[i])!==(0|(n[i]||0)))return!0}return!1},t.prototype.updateCb=function(e){var t=!1,o=!1;switch(e.getEventCode()){case jsb.EventAssetsManager.ERROR_NO_LOCAL_MANIFEST:o=!0;break;case jsb.EventAssetsManager.UPDATE_PROGRESSION:var n=e.getTotalFiles(),i=e.getDownloadedFiles();this.label.string=(i/n*100).toFixed(2)+" %";break;case jsb.EventAssetsManager.ERROR_DOWNLOAD_MANIFEST:case jsb.EventAssetsManager.ERROR_PARSE_MANIFEST:case jsb.EventAssetsManager.ALREADY_UP_TO_DATE:o=!0;break;case jsb.EventAssetsManager.UPDATE_FINISHED:t=!0;break;case jsb.EventAssetsManager.UPDATE_FAILED:this._updating=!1,this._canRetry=!0,this._failCount>0&&this.retry();break;case jsb.EventAssetsManager.ERROR_UPDATING:this._failCount++;break;case jsb.EventAssetsManager.ERROR_DECOMPRESS:}if(o&&(this._am.setEventCallback(null),this._updateListener=null,this._updating=!1),t){this._am.setEventCallback(null),this._updateListener=null;var r=jsb.fileUtils.getSearchPaths(),s=this._am.getLocalManifest().getSearchPaths();console.log(JSON.stringify(s)),Array.prototype.unshift.apply(r,s),cc.sys.localStorage.setItem("HotUpdateSearchPaths",JSON.stringify(r)),jsb.fileUtils.setSearchPaths(r),cc.audioEngine.stopAll(),this.setCustManifest(this.newVersion[0],this.newVersion[1]),"Windows"!=cc.sys.os&&"OS X"!=cc.sys.os&&setTimeout(function(){cc.game.restart()},1500)}},t.prototype.getCustManifest=function(){var e=(jsb.fileUtils?jsb.fileUtils.getWritablePath():"/")+"manifest/version.manifest";return jsb.fileUtils.getStringFromFile(e)&&e},t.prototype.setCustManifest=function(e,t){var o=JSON.stringify({packageUrl:e,remoteManifestUrl:e+"project.manifest",remoteVersionUrl:e+"version.manifest",version:t}),n=(jsb.fileUtils?jsb.fileUtils.getWritablePath():"/")+"manifest";jsb.fileUtils.isDirectoryExist(n)||jsb.fileUtils.createDirectory(n),jsb.fileUtils.writeStringToFile(o,n+"/version.manifest")},t.prototype.retry=function(){!this._updating&&this._canRetry&&(this._canRetry=!1,this._am.downloadFailedAssets())},t.prototype.startUpdate=function(){if(this._am&&!this._updating){if(this._am.setEventCallback(this.updateCb.bind(this)),this._am.getState()===jsb.AssetsManager.State.UNINITED){var e=this.manifestUrl.nativeUrl;cc.loader.md5Pipe&&(e=cc.loader.md5Pipe.transformURL(e)),this._am.loadLocalManifest(e)}this._failCount=0,this._am.update(),this._updating=!0}},t.prototype.onDestroy=function(){this._updateListener&&(this._am.setEventCallback(null),this._updateListener=null)},i([a(cc.Label)],t.prototype,"label",void 0),i([a(cc.Label)],t.prototype,"label2",void 0),i([a(cc.ProgressBar)],t.prototype,"fileProgress",void 0),i([a(cc.Asset)],t.prototype,"versionUrl",void 0),i([a(cc.Asset)],t.prototype,"manifestUrl",void 0),i([a(cc.Node)],t.prototype,"nodeBg",void 0),t=i([s],t)}(cc.Component);o.default=c,cc._RF.pop()},{}],mainGameBossSkill:[function(e,t,o){"use strict";cc._RF.push(t,"b1015qZWpNLG6C/sMAOl0wF","mainGameBossSkill"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){}return e.reset=function(){this.skillAry=[],this.father=null,this.skillObj=null,this.curskill=null,this.curskillNum=0,this.skillIndex=0},e.init=function(e,t,o){this.father=e,this.skillObj=o,t=t.split(",");for(var n=0;n<t.length;n++){var i=t[n],r={icon:(i=i.split(":"))[0],num:i[1]};this.skillAry.push(r)}cc.log(this.skillObj),this.skillIndex=0,this.updateSkillIcon(this.skillAry[0])},e.getRandomNum=function(e){return Math.floor(Math.random()*e)},e.updateSkillIcon=function(e){if(4==e.num)switch(this.getRandomNum(3)){case 0:e.icon="10531";break;case 1:e.icon="10121";break;case 2:e.icon="10131"}var t=this;for(var o in this.skillObj)this.skillObj[o].id==e.icon&&(t.curskillNum=e.num,t.curskill=this.skillObj[o],cc.resources.load(t.iconlj+this.skillObj[o].icon,cc.SpriteFrame,function(o,n){o?cc.log(o):(t.father.skillIcon.getComponent(cc.Sprite).spriteFrame=n,t.father.skillIcon.children[0].getComponent(cc.Label).string=e.num)}))},e.updateRound=function(e){this.curskillNum--,this.father.skillIcon.children[0].getComponent(cc.Label).string=this.curskillNum},e.showInfo=function(){this.father.showInfo(this.curskill.info)},e.isActk=function(){if(this.curskillNum<=0&&0==this.father.bossActkJinzhi){switch(this.curskill.id){case"10531":this.father.updateStartBoss(7,3);break;case"10431":case"10221":break;case"10121":this.father.updateStartBoss(5);break;case"10131":this.father.updateStartBoss(6,3)}var e=JSON.parse(this.curskill.effect);2==e[0].DamageType&&this.father.bossActk(e[0].Value),this.skillIndex++,this.skillIndex>=this.skillAry.length&&(this.skillIndex=0),this.updateSkillIcon(this.skillAry[this.skillIndex])}},e.updateSkill=function(){},e.skillAry=[],e.father=null,e.iconlj="home/skills/",e.skillObj=null,e.curskill=null,e.curskillNum=0,e.skillIndex=0,e}();o.default=n,cc._RF.pop()},{}],mainGameConfig:[function(e,t,o){"use strict";cc._RF.push(t,"3ba84JYW+9CZLOI8aql7OTF","mainGameConfig"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("../Config"),i=function(){function e(){}return e.init=function(){n.default.load(),this.myInfo=n.default.Sys_Player[1],this.myInfo.nuqi=0,this.bossInfo=n.default.Sys_Enemy[1],this.bossInfo.baseHp=n.default.Sys_Enemy[1].hp,this.skillMgr=n.default.Sys_Ability,this.skillItem=n.default.Sys_Item},e.reset=function(){this.bushu=0,this.bossInfo=null,this.skillMgr=null},e.cardNum=6,e.startX=-359,e.startY=-359.5,e.widthMove=142,e.heightMove=141,e.heightY=500,e.changelifeScore={score:0,num:0},e.changenuqiScore={score:0,num:0},e.changebossScore1={score:0,num:0},e.changebossScore2={score:0,num:0},e.bushu=0,e.baseinfo={1:1,2:1.3,3:2.3},e.myInfo=null,e.bossInfo=null,e.skillMgr=null,e.skillItem=null,e.startTypeNum=4,e}();o.default=i,cc._RF.pop()},{"../Config":"Config"}],mainGame_startNode:[function(e,t,o){"use strict";cc._RF.push(t,"11161tuU1RFOb4e/tf4HAXY","mainGame_startNode");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,o,s):i(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,a=r.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t.text="hello",t.pos=cc.v2(0,0),t.type=null,t.destroyStyle=!1,t.level=1,t.buffType=0,t.buffNumber=0,t.father=null,t.bossD=!1,t}return n(t,e),t.prototype.start=function(){},t.prototype.setPosition=function(e,t,o,n,i,r,s){this.father=e;var a=cc.moveTo(t,cc.v2(o,n));this.node.runAction(a),this.pos=cc.v2(i,r),this.type||100==s||(this.node.children[s].active=!0,this.node.children[s].children[0].active=!0,this.type=s)},t.prototype.updateBuffNum=function(){this.buffNumber--,this.buffNumber<=0&&(this.buffNumber=0,this.father.bossSkillOn(this.type));for(var e=6;e<this.node.childrenCount;e++)this.node.children[e].active&&(this.node.children[e].children[0].getComponent(cc.Label).string=this.buffNumber+"",0==this.buffNumber&&(this.node.children[e].children[0].active=!1))},t.prototype.setPosition2=function(e,t,o,n){for(var i=0;i<this.node.children.length;i++)this.node.children[i].active=!1;this.father=e,this.pos=cc.v2(t,o),n>=10&&n<20?(n-=10,this.node.children[n].active=!0,this.node.children[n].children.length>0&&(this.node.children[n].children[1].active=!0),this.level=2,this.type=n):n>=20?(n-=20,this.node.children[n].active=!0,this.node.children[n].children.length>0&&(this.node.children[n].children[2].active=!0),this.level=3,this.type=n):(this.node.children[n].active=!0,this.node.children[n].children.length>0&&(this.node.children[n].children[0].active=!0),this.level=4,this.type=n)},t.prototype.addBUff=function(e,t,o){if(5==e){for(var n=5;n<this.node.children.length;n++)this.node.children[n].active=!1;this.node.children[e].active=t}else{for(n=0;n<this.node.children.length;n++)this.node.children[n].active=!1;this.node.children[e].active=t,this.type=e,this.buffNumber=3,this.node.children[e].children[0].getComponent(cc.Label).string=o,7==e&&(this.bossD=!0)}this.buffType=t?e:0},i([a(cc.Label)],t.prototype,"label",void 0),i([a],t.prototype,"text",void 0),t=i([s],t)}(cc.Component);o.default=c,cc._RF.pop()},{}],mainGame:[function(e,t,o){"use strict";cc._RF.push(t,"158c7aYJk1Hr4ke1rMhQKZV","mainGame");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,o,s):i(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,a=r.property,c=e("../utils/NodeHelp"),l=e("./mainGameConfig"),u=e("./mainGameBossSkill"),d=e("../commom/SpineMap"),p=e("../Game"),f=e("../components/Effect"),h=e("../utils/SceneMgr"),y=e("../utils/Data"),_=e("../utils/SoundMgr"),m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.score=null,t.timer=null,t.scoreNuqi=null,t.skillIcon=null,t.gameNode=null,t.result=null,t.myskillItem=null,t.zhezhao=null,t.roleSpine=null,t.starNode=null,t.mylift_ProgressBar=null,t.nuqi_ProgressBar=null,t.boss_ProgressBar=null,t.pos_myself=cc.v2(-600,-500),t.pos_girl=cc.v2(770,-30),t.pos_girl_score=cc.v2(460,280),t.pos_myself_score=cc.v2(-878,-308),t.pos_nuqi_score=cc.v2(-733,-308),t.starAry=[[],[],[],[],[],[]],t.reSetStart=[],t.spine=null,t.spineChange=!1,t.spineNum=0,t.act0=!1,t.act1=!1,t.act2=!1,t.act3=!1,t.huifubaoshi=0,t.longhunbaoshi=0,t.bossActkJinzhi=0,t.fuhuobaoshi=!1,t.qiujibaoshi=!1,t.jinengbaoshi=!1,t.superboshi=!1,t.didangAckNum=0,t}return n(t,e),t.prototype.onLoad=function(){var e=this;_.default.play("sound/girl_5",!0),l.default.reset(),u.default.reset(),l.default.init(),this.scheduleOnce(function(){u.default.init(e,l.default.bossInfo.battleCycle,l.default.skillMgr)},1),c.TransitionsShow()},t.prototype.gameEnd=function(){this.zhezhao.active=!0,this.gameNode.active=!1,this.result.active=!0,l.default.bossInfo.hp<=0?(_.default.play("sound/"+l.default.bossInfo.loseSound),this.result.children[0].active=!0,this.result.children[1].active=!1,p.Game.intimacy++,p.Game.combatPgs++,y.updateIntimacy(p.Game.intimacy),y.updateCombatPgs(p.Game.combatPgs),y.updateUserScore(p.Game.userScore+500)):(_.default.play("sound/"+l.default.bossInfo.winSound),this.result.children[0].active=!1,this.result.children[1].active=!0),this.scheduleOnce(function(){l.default.reset(),u.default.reset(),h.default.backScene()},2)},t.prototype.updateSkillIcon=function(e){},t.prototype.changeScoreAni=function(e,t){var o=this.pos_girl_score,n=null;2==t?(o=this.pos_myself_score,n=cc.instantiate(this.score.node)):3==t?(o=this.pos_nuqi_score,n=cc.instantiate(this.scoreNuqi.node)):n=cc.instantiate(this.score.node),n.parent=this.node,n.active=!0,e=parseInt(e),parseInt(e)>0&&(e="+"+e),n.getComponent(cc.Label).string=e,n.setPosition(o);var i=cc.moveTo(1,cc.v2(o.x,o.y+100)),r=cc.sequence(i,cc.callFunc(function(){n.destroy()}));n.runAction(r)},t.prototype.updateleftProgress=function(e){var t=parseInt(l.default.myInfo.hp)+e;t<=1200?l.default.myInfo.hp=t:t=1200,this.mylift_ProgressBar.progress=t/1200*.3+.5;var o=parseInt((t/1200*100).toString());this.mylift_ProgressBar.node.children[0].getComponent(cc.Label).string=o+"%",l.default.myInfo.hp<=0&&(this.fuhuobaoshi?(this.fuhuobaoshi=!1,this.scoreAni(720-l.default.myInfo.hp,2,1),this.scoreAni(60,3,1)):this.gameEnd())},t.prototype.updateNuqiProgress=function(e){l.default.myInfo.nuqi=e+l.default.myInfo.nuqi,l.default.myInfo.nuqi>60&&(l.default.myInfo.nuqi=60),this.nuqi_ProgressBar.progress=l.default.myInfo.nuqi/60*.3;var t=parseInt((l.default.myInfo.nuqi/60*60).toString());this.nuqi_ProgressBar.node.children[0].getComponent(cc.Label).string=t+"/60"},t.prototype.updatebossProgress=function(e){l.default.bossInfo.hp=parseInt(l.default.bossInfo.hp)+e,this.boss_ProgressBar.progress=parseInt(l.default.bossInfo.hp)/parseInt(l.default.bossInfo.baseHp)},t.prototype.randomCreateCardNumber=function(){return Math.floor(Math.random()*l.default.startTypeNum)},t.prototype.updateSpine=function(){if(this.spineChange)switch(_.default.play("sound/"+l.default.bossInfo.brokeClothSound),this.spineChange=!1,this.spineNum++,this.spineNum){case 1:var e="spines/"+d.Stand[p.Game.currentRule];this.spine=new f.Effect(e,this.roleSpine),this.spine.setSkin("\u7834\u88631");break;case 2:e="spines/"+d.Stand[p.Game.currentRule];this.spine=new f.Effect(e,this.roleSpine),this.spine.setSkin("\u7834\u88632")}},t.prototype.start=function(){var e=this,t="spines/"+d.Stand[p.Game.currentRule];this.spine=new f.Effect(t,this.roleSpine),cc.log(p.Game.carrySkill2),this.init();for(var o=0,n=0,i=0,r=0;r<l.default.cardNum;r++){o=l.default.startX+l.default.widthMove*r;for(var s=0;s<l.default.cardNum;s++){n=l.default.startY+l.default.heightMove*s;var a=cc.instantiate(this.starNode);a.parent=this.gameNode,a.x=o,a.y=l.default.heightY,a.active=!0,this.starAry[r][s]=a,a.getComponent("mainGame_startNode").setPosition(this,i,a.x,n,r,s,this.randomCreateCardNumber()),i+=.02,a.on(cc.Node.EventType.TOUCH_START,this.mouseStart,this),a.on(cc.Node.EventType.TOUCH_MOVE,this.mouseFun,this),a.on(cc.Node.EventType.TOUCH_END,this.mouseEnd,this),a.on(cc.Node.EventType.TOUCH_CANCEL,this.mouseCancel,this)}}this.scheduleOnce(function(){e.chenkDestroyStart()},1)},t.prototype.init=function(){for(var e=0;e<p.Game.carrySkill2.length;e++){var t=cc.instantiate(this.myskillItem);for(var o in t.active=!0,t.parent=this.myskillItem.parent,t.skillId=p.Game.carrySkill2[e],l.default.skillItem)l.default.skillItem[o].id==p.Game.carrySkill2[e]&&(t.info=l.default.skillItem[o].info,c.setNodeSpf("home/skills/"+l.default.skillItem[o].iconId,t));t.on(cc.Node.EventType.TOUCH_START,this.skillClickMy,this)}this.skillIcon.on(cc.Node.EventType.TOUCH_START,function(){u.default.showInfo()})},t.prototype.showInfo=function(e){c.showAlert(e)},t.prototype.skillClickMy=function(e){switch(cc.log(e.target.skillId),c.showAlert(e.target.info),e.target.skillId){case"101":this.scoreAni(1200,2,1);break;case"201":this.huifubaoshi=8;break;case"301":this.scoreAni(20,3,1);break;case"401":this.longhunbaoshi=5;break;case"501":for(var t=0,o=0;o<6;o++)for(var n=0;n<6;n++)5==this.starAry[o][n].getComponent("mainGame_startNode").buffType&&t<=7&&(this.starAry[o][n].getComponent("mainGame_startNode").addBUff(5,!1),t++);break;case"601":this.bossActkJinzhi=7;break;case"701":this.fuhuobaoshi=!0;break;case"801":this.qiujibaoshi=!0;break;case"901":this.jinengbaoshi=!0;break;case"1001":l.default.bushu-=15,l.default.bushu<0&&(l.default.bushu=0);break;case"1101":this.superboshi=!0}e.target.destroy()},t.prototype.mouseCancel=function(e){if(5!=e.target.getComponent("mainGame_startNode").buffType)return e.target.x<l.default.startX-100||e.target.x>l.default.startX+5*l.default.widthMove+100||e.target.y<l.default.startY-100||e.target.y>l.default.startY+5*l.default.heightMove+100?(e.target.setPosition(this.oldPostion),void(this.canMove=!1)):void(this.canMove&&(this.zhezhao.active=!0,this.checkChange(e.target)))},t.prototype.mouseStart=function(e){5!=e.target.getComponent("mainGame_startNode").buffType&&(this.canMove=!0,this.oldPostion=e.target.getPosition())},t.prototype.mouseFun=function(e){if(this.superboshi||this.jinengbaoshi||this.qiujibaoshi)c.showAlert("\u4f60\u9009\u62e9\u4e86\u6280\u80fd\u5b9d\u77f3\uff01\u65e0\u6cd5\u79fb\u52a8");else if(5!=e.target.getComponent("mainGame_startNode").buffType&&this.canMove){var t=e.getDelta();e.target.x+=t.x,e.target.y+=t.y,e.target.x-this.oldPostion.x>0?e.target.x-this.oldPostion.x>20&&(e.target.y=this.oldPostion.y):this.oldPostion.x-e.target.x>20&&(e.target.y=this.oldPostion.y),e.target.y-this.oldPostion.y>0?e.target.y-this.oldPostion.y>20&&(e.target.x=this.oldPostion.x):this.oldPostion.y-e.target.y>20&&(e.target.x=this.oldPostion.x),this.checkstarNode(e.target)}},t.prototype.mouseEnd=function(e){if(this.superboshi)return this.superboshi=!1,void(i=e.target.getComponent("mainGame_startNode")).setPosition2(this,i.pos.x,i.pos.y,4);if(this.jinengbaoshi)(i=e.target.getComponent("mainGame_startNode")).type<4?(this.jinengbaoshi=!1,i.setPosition2(this,i.pos.x,i.pos.y,i.type+20)):c.showAlert("\u9009\u62e9\u666e\u901a\u661f\u661f");else if(this.qiujibaoshi){this.qiujibaoshi=!1;var t=e.target.getComponent("mainGame_startNode").pos;e.target.destroy(),this.starAry[t.x][t.y]=null,_.default.play("sound/"+l.default.bossInfo.superHurtSound),this.deleNullAry();for(var o=[t],n=0;n<o.length;n++){var i;if(!this.hasResSetStart(o[n]))(i=cc.instantiate(this.starNode)).parent=this.gameNode,i.x=l.default.startX+l.default.widthMove*o[n].x,i.y=l.default.heightY,i.getComponent("mainGame_startNode").setPosition2(this,o[n].x,this.starAry[o[n].x].length,this.randomCreateCardNumber()),i.active=!0,i.on(cc.Node.EventType.TOUCH_START,this.mouseStart,this),i.on(cc.Node.EventType.TOUCH_MOVE,this.mouseFun,this),i.on(cc.Node.EventType.TOUCH_END,this.mouseEnd,this),i.on(cc.Node.EventType.TOUCH_CANCEL,this.mouseCancel,this),this.starAry[o[n].x].push(i)}this.updateStartUI()}else if(5!=e.target.getComponent("mainGame_startNode").buffType){if(e.target.x<l.default.startX-100||e.target.x>l.default.startX+5*l.default.widthMove+100||e.target.y<l.default.startY-100||e.target.y>l.default.startY+5*l.default.heightMove+100)return e.target.setPosition(this.oldPostion),void(this.canMove=!1);if(this.canMove){if(this.zhezhao.active=!0,4==e.target.getComponent("mainGame_startNode").type&&e.target.getPosition().x==this.oldPostion.x&&e.target.getPosition().y==this.oldPostion.y)return this.destroyStartAni(e.target.getComponent("mainGame_startNode").pos),void this.bonStart(e.target.getComponent("mainGame_startNode").pos);this.checkChange(e.target)}}},t.prototype.checkChange=function(e){var t,o,n=this,i=0,r=0,s=1,a=1,c=null,d=e.getComponent("mainGame_startNode").pos;if(e.x>this.oldPostion.x?i=e.x-this.oldPostion.x:(s=-1,i=this.oldPostion.x-e.x),e.y>this.oldPostion.y?r=e.y-this.oldPostion.y:(a=-1,r=this.oldPostion.y-e.y),r>i){if(r<5)return void(this.zhezhao.active=!1);var p=d.y+a;c=this.starAry[d.x][p]}else{if(i<5)return void(this.zhezhao.active=!1);var f=d.x+s;c=this.starAry[f][d.y]}if(t=c.getComponent("mainGame_startNode").pos,o=c.getPosition(),5==c.getComponent("mainGame_startNode").buffType)return e.setPosition(this.oldPostion),void(this.zhezhao.active=!1);this.updateNode(o,t,e),this.updateNode(this.oldPostion,d,c),this.scheduleOnce(function(){n.chenkDestroyStart()?(u.default.updateRound(1),l.default.bushu++,n.updateSkillNum(),n.huifubaoshi>0&&(n.huifubaoshi--,n.scoreAni(.15*l.default.myInfo.hp,2,1)),n.longhunbaoshi>0&&n.longhunbaoshi--,n.bossActkJinzhi>0&&n.bossActkJinzhi--):(n.zhezhao.active=!0,n.updateNode(n.oldPostion,d,e),n.updateNode(o,t,c),n.scheduleOnce(function(){n.zhezhao.active=!1},.5))},.5)},t.prototype.bossSkillOn=function(e){if(!(e<5))switch(e){case 6:this.meihuoAni()}},t.prototype.meihuoAni=function(){for(var e=this,t=0,o=0;o<l.default.cardNum;o++)for(var n=function(e){var n=i.starAry[o][e];if(n&&6==n.getComponent("mainGame_startNode").type&&0==parseInt(n.children[6].children[0].getComponent(cc.Label).string)){var r=cc.instantiate(n);r.parent=n.parent,r.children[6].children[0].active=!1;var s=cc.scaleTo(.2,1.5),a=cc.moveTo(.5,i.pos_girl),c=cc.sequence(s,cc.delayTime(.5),a,cc.callFunc(function(){r.destroy(),t++}));r.runAction(c)}},i=this,r=0;r<l.default.cardNum;r++)n(r);this.scheduleOnce(function(){for(var o=0;o<t;o++)setTimeout(function(){e.updatebossProgress(20),e.changeScoreAni(20,1)},500*o)},1.5)},t.prototype.updateSkillNum=function(){for(var e=0;e<l.default.cardNum;e++)for(var t=0;t<l.default.cardNum;t++){var o=this.starAry[e][t];o&&o.getComponent("mainGame_startNode").updateBuffNum()}},t.prototype.bossActk=function(e){this.scoreAni(-e,2,1)},t.prototype.chenkDestroyStart=function(){for(var e=this,t=[],o=0;o<l.default.cardNum;o++)for(var n=0;n<l.default.cardNum;n++){for(var i,r=this.starAry[o][n],s=!1,a=0;a<t.length;a++)if(t[a]){var c=t[a];s=this.checkTheSame(c,r.getComponent("mainGame_startNode").pos)}if(!s)(i=this.checkSameStart_rf(r,[r.getComponent("mainGame_startNode").pos])).length>=3&&t.push(i);if(!s)(i=this.checkSameStart_ud(r,[r.getComponent("mainGame_startNode").pos])).length>=3&&t.push(i)}if(0==t.length)return this.scheduleOnce(function(){e.updateSpine(),(l.default.bossInfo.hp<=0||l.default.bushu>=40)&&e.gameEnd(),e.zhezhao.active=!1,u.default.isActk();e.getRandomNum(4)},1),!1;var d=this.desTheSameStartAry(t);this.reSetStartFuc(d);var p=[];for(o=0;o<d.length;o++){var f=d[o];for(n=0;n<f.length;n++)this.starAry[f[n].x][f[n].y]&&(this.starAry[f[n].x][f[n].y].getComponent("mainGame_startNode").destroyStyle||(5==this.starAry[f[n].x][f[n].y].getComponent("mainGame_startNode").buffType?this.starAry[f[n].x][f[n].y].getComponent("mainGame_startNode").addBUff(5,!1):(p.push(f[n]),this.starAry[f[n].x][f[n].y].getComponent("mainGame_startNode").destroyStyle=!0,this.destroyStartAni(f[n]))))}for(o=0;o<6;o++)6==this.starAry[o][0].getComponent("mainGame_startNode").buffType&&(this.starAry[o][0].destroy(),this.starAry[o][0]=null,p.push({x:o,y:0}));var h=0,y=function(t){for(var o=function(o){var n=m.starAry[t][o];if(n&&7==n.getComponent("mainGame_startNode").type&&0==parseInt(n.children[7].children[0].getComponent(cc.Label).string)){p.push({x:t,y:o}),n.children[7].children[0].active=!1;var i=cc.scaleTo(.2,1.5),r=cc.moveTo(.5,m.pos_myself),s=cc.sequence(i,cc.delayTime(.5),r,cc.callFunc(function(){n.destroy(),e.starAry[t][o]=null,h++}));n.runAction(s)}},n=0;n<l.default.cardNum;n++)o(n)},m=this;for(o=0;o<l.default.cardNum;o++)y(o);return this.scheduleOnce(function(){for(var t=0;t<h;t++)setTimeout(function(){e.updateleftProgress(-20),e.changeScoreAni(-20,2)},500*t);e.act0&&(e.act0=!1,_.default.play("sound/gwjn1"),e.scheduleOnce(function(){e.spine.setAnimation("\u6124\u6012"),e.scheduleOnce(function(){e.spine.setAnimation("\u5f85\u673a")},.5),_.default.play("sound/"+l.default.bossInfo.abilityHurtSound)},.5)),e.act1&&(e.act1=!1,_.default.play("sound/Susan_daji2"),e.scheduleOnce(function(){e.spine.setAnimation("\u6124\u6012"),e.scheduleOnce(function(){e.spine.setAnimation("\u5f85\u673a")},.5),_.default.play("sound/"+l.default.bossInfo.abilityHurtSound)},.5)),e.act2&&(e.act2=!1,_.default.play("sound/xixue")),e.act3&&(e.act3=!1,_.default.play("sound/nuqi")),e.updateScoreUI();for(t=0;t<e.reSetStart.length;t++){var o=e.reSetStart[t].pos,n=e.reSetStart[t].num,i=null;(i=e.starAry[o.x][o.y]?e.starAry[o.x][o.y]:cc.instantiate(e.starNode)).parent=e.gameNode,i.x=l.default.startX+l.default.widthMove*o.x,i.y=l.default.startY+l.default.heightMove*o.y,i.getComponent("mainGame_startNode").setPosition2(e,o.x,o.y,n),i.active=!0,i.on(cc.Node.EventType.TOUCH_START,e.mouseStart,e),i.on(cc.Node.EventType.TOUCH_MOVE,e.mouseFun,e),i.on(cc.Node.EventType.TOUCH_END,e.mouseEnd,e),i.on(cc.Node.EventType.TOUCH_CANCEL,e.mouseCancel,e),e.starAry[o.x][o.y]=i}e.deleNullAry();for(t=0;t<p.length;t++){if(!e.hasResSetStart(p[t]))(i=cc.instantiate(e.starNode)).parent=e.gameNode,i.x=l.default.startX+l.default.widthMove*p[t].x,i.y=l.default.heightY,i.getComponent("mainGame_startNode").setPosition2(e,p[t].x,e.starAry[p[t].x].length,e.randomCreateCardNumber()),i.active=!0,i.on(cc.Node.EventType.TOUCH_START,e.mouseStart,e),i.on(cc.Node.EventType.TOUCH_MOVE,e.mouseFun,e),i.on(cc.Node.EventType.TOUCH_END,e.mouseEnd,e),i.on(cc.Node.EventType.TOUCH_CANCEL,e.mouseCancel,e),e.starAry[p[t].x].push(i)}e.reSetStart=[],e.updateStartUI()},1.5),!0},t.prototype.bonStart=function(e){var t=this;this.scheduleOnce(function(){_.default.play("sound/"+l.default.bossInfo.superHurtSound),t.deleNullAry();for(var o=[e],n=0;n<o.length;n++)if(!t.hasResSetStart(o[n])){var i=cc.instantiate(t.starNode);i.parent=t.gameNode,i.x=l.default.startX+l.default.widthMove*o[n].x,i.y=l.default.heightY,i.getComponent("mainGame_startNode").setPosition2(t,o[n].x,t.starAry[o[n].x].length,t.randomCreateCardNumber()),i.active=!0,i.on(cc.Node.EventType.TOUCH_START,t.mouseStart,t),i.on(cc.Node.EventType.TOUCH_MOVE,t.mouseFun,t),i.on(cc.Node.EventType.TOUCH_END,t.mouseEnd,t),i.on(cc.Node.EventType.TOUCH_CANCEL,t.mouseCancel,t),t.starAry[o[n].x].push(i)}t.scoreAni(300,1,1),t.updateStartUI()},1.5)},t.prototype.hasResSetStart=function(e){for(var t=0;t<this.reSetStart.length;t++){var o=this.reSetStart[t].pos;if(o.x==e.x&&o.y==e.y)return!0}return!1},t.prototype.hashightStart=function(e){for(var t=0;t<e.length;t++)if(3==this.starAry[e[t].x][e[t].y].getComponent("mainGame_startNode").level)return{level:3,type:this.starAry[e[t].x][e[t].y].getComponent("mainGame_startNode").type};for(t=0;t<e.length;t++)if(2==this.starAry[e[t].x][e[t].y].getComponent("mainGame_startNode").level)return{level:2,type:this.starAry[e[t].x][e[t].y].getComponent("mainGame_startNode").type};return{level:1,type:this.starAry[e[0].x][e[0].y].getComponent("mainGame_startNode").type}},t.prototype.updateDidangAni=function(){for(var e=0;e<6;e++)for(var t=0;t<6;t++){var o=this.starAry[e][t];if(o.getComponent("mainGame_startNode").bossD){o.getComponent("mainGame_startNode").bossD=!1;var n=cc.scaleTo(.2,3),i=cc.scaleTo(.2,1),r=cc.sequence(n,cc.delayTime(.5),i);return void o.runAction(r)}}},t.prototype.scoreAni=function(e,t,o){for(var n=this,i=0;i<o;i++)setTimeout(function(){switch(t){case 1:n.didangAckNum>0?(n.didangAckNum--,n.updateDidangAni()):(n.updatebossProgress(-e),n.changeScoreAni(-e,t));break;case 2:n.updateleftProgress(e),n.changeScoreAni(e,t);break;case 3:n.longhunbaoshi>0&&(e*=2),n.updateNuqiProgress(e),n.changeScoreAni(e,t)}},500*i)},t.prototype.getRandomNum=function(e){return Math.floor(Math.random()*e)},t.prototype.updateStartBoss=function(e,t){cc.log("bossskill",e),7==e&&(this.didangAckNum+=3);for(var o=0;o<3;o++)this.starAry[this.getRandomNum(6)][this.getRandomNum(6)].getComponent("mainGame_startNode").addBUff(e,!0,t)},t.prototype.updateScoreUI=function(){var e=this;l.default.changebossScore1.score>0?(this.scoreAni(l.default.changebossScore1.score,1,l.default.changebossScore1.num),l.default.changebossScore2.score>0&&this.scheduleOnce(function(){e.scoreAni(l.default.changebossScore2.score,1,l.default.changebossScore2.num),l.default.changebossScore2.score=0,l.default.changebossScore2.num=0},.5)):l.default.changebossScore2.score>0&&(this.scoreAni(l.default.changebossScore2.score,1,l.default.changebossScore2.num),l.default.changebossScore2.score=0,l.default.changebossScore2.num=0),l.default.changelifeScore.score>0&&this.scoreAni(l.default.changelifeScore.score,2,l.default.changelifeScore.num),l.default.changenuqiScore.score>0&&this.scoreAni(l.default.changenuqiScore.score,3,l.default.changenuqiScore.num),l.default.changebossScore1.score=0,l.default.changebossScore1.num=0,l.default.changelifeScore.score=0,l.default.changelifeScore.num=0,l.default.changenuqiScore.score=0,l.default.changenuqiScore.num=0},t.prototype.updateScore=function(e){var t=e.level,o=e.type,n=e.num;switch(o){case 0:l.default.changebossScore1.score=l.default.myInfo.physicAtk*(1-l.default.bossInfo.physicDef/100)*(1+l.default.myInfo.nuqi/100)*l.default.baseinfo[t],l.default.changebossScore1.num+=n,3==t&&(this.spineChange=!0);break;case 1:l.default.changebossScore2.score=l.default.myInfo.magicAtk*(1-l.default.bossInfo.magicDef/100)*(1+l.default.myInfo.nuqi/100)*l.default.baseinfo[t],l.default.changebossScore2.num+=n,3==t&&(this.spineChange=!0);break;case 2:l.default.changelifeScore.score=l.default.myInfo.cureAtk*l.default.baseinfo[t],l.default.changelifeScore.num+=n;break;case 3:l.default.changenuqiScore.score=l.default.myInfo.rageAtk*l.default.baseinfo[t],l.default.changenuqiScore.num+=n}},t.prototype.reSetStartFuc=function(e){for(var t=[],o=0;o<e.length;o++){if(4==e[o].length){var n={pos:e[o][1],num:this.starAry[e[o][1].x][e[o][1].y].getComponent("mainGame_startNode").type+10};this.reSetStart.push(n),(s=this.hashightStart(e[o])).num=2,this.updateScore(s)}for(var i=o+1;i<e.length;i++){var r=this.isTheSameAry(e[o],e[i]);if(2!=r&&1!=r){n={pos:r,num:this.starAry[r.x][r.y].getComponent("mainGame_startNode").type+20};var s={};s=this.hashightStart(e[o]).level>=this.hashightStart(e[i]).level?this.hashightStart(e[o]):this.hashightStart(e[i]),t.push(o),t.push(i),s.num=3,this.updateScore(s),this.reSetStart.push(n)}}if(3==e[o].length){for(var a=!1,c=0;c<t.length;c++)o==t[c]&&(a=!0);if(!a)(s=this.hashightStart(e[o])).num=1,this.updateScore(s)}if(e[o].length>=5){var l=Math.floor(e[o].length/2);n={pos:e[o][l],num:4};(s=this.hashightStart(e[o])).num=3,this.updateScore(s),this.reSetStart.push(n)}}},t.prototype.desTheSameStartAry=function(e){for(var t=[],o=0;o<e.length;o++)for(var n=e[o],i=o+1;i<e.length;i++){var r=e[i];2==this.isTheSameAry(n,r)&&t.push(i)}var s=[];for(o=0;o<e.length;o++){var a=!1;for(i=0;i<t.length;i++)o==t[i]&&(a=!0);a||s.push(e[o])}return s},t.prototype.isTheSameAry=function(e,t){if(e.length!=t.length)return 1;for(var o=0,n=null,i=0;i<e.length;i++){for(var r=e[i],s=!1,a=0;a<e.length;a++)r.x==t[a].x&&r.y==t[a].y&&(s=!0,n=r);s&&o++}return 0==o?1:o==e.length?2:o!=e.length?n:void 0},t.prototype.destroyStartAni=function(e){var t=this,o=this.starAry[e.x][e.y],n=this.pos_girl;switch(o.getComponent("mainGame_startNode").type){case 0:this.act0=!0;break;case 1:this.act1=!0;break;case 2:this.act2=!0,n=this.pos_myself;break;case 3:this.act3=!0,n=this.pos_myself}var i=cc.scaleTo(.2,1.5),r=cc.moveTo(.5,n),s=cc.sequence(i,cc.delayTime(.5),r,cc.callFunc(function(){o.destroy(),t.starAry[e.x][e.y]=null}));o.runAction(s)},t.prototype.deleNullAry=function(){for(var e=0;e<l.default.cardNum;e++)for(var t=0;t<this.starAry[e].length;t++)if(!this.starAry[e][t]){this.starAry[e].splice(t,1),this.deleNullAry();break}},t.prototype.updateStartUI=function(){for(var e=this,t=0,o=0,n=0;n<l.default.cardNum;n++){l.default.startX+l.default.widthMove*n;for(var i=0;i<l.default.cardNum;i++){t=l.default.startY+l.default.heightMove*i;var r=this.starAry[n][i];r||cc.log("nodenull  : "+n,i),r.getComponent("mainGame_startNode").setPosition(this,o,r.x,t,n,i,100),o+=.02}}this.scheduleOnce(function(){e.chenkDestroyStart()},1)},t.prototype.checkSameStart_rf=function(e,t,o){void 0===o&&(o="");var n,i=e.getComponent("mainGame_startNode"),r=i.pos.x-1,s=i.pos.x+1;r>=0&&"c"!=o&&s<=5&&((n=this.starAry[r][i.pos.y].getComponent("mainGame_startNode")).type==i.type&&i.type<4&&(this.checkTheSame(t,n.pos)||(t.push(n.pos),this.checkSameStart_rf(n,t,"d"))));s<=5&&"d"!=o&&r>=0&&((n=this.starAry[s][i.pos.y].getComponent("mainGame_startNode")).type==i.type&&i.type<4&&(this.checkTheSame(t,n.pos)||(t.push(n.pos),this.checkSameStart_rf(n,t,"c"))));return t},t.prototype.checkSameStart_ud=function(e,t,o){void 0===o&&(o="");var n,i=e.getComponent("mainGame_startNode"),r=i.pos.y+1,s=i.pos.y-1;r<=5&&"a"!=o&&s>=0&&((n=this.starAry[i.pos.x][r].getComponent("mainGame_startNode")).type==i.type&&i.type<4&&(this.checkTheSame(t,n.pos)||(t.push(n.pos),this.checkSameStart_ud(n,t,"b"))));s>=0&&"b"!=o&&r<=5&&((n=this.starAry[i.pos.x][s].getComponent("mainGame_startNode")).type==i.type&&i.type<4&&(this.checkTheSame(t,n.pos)||(t.push(n.pos),this.checkSameStart_ud(n,t,"a"))));return t},t.prototype.checkSameStart=function(e,t,o){void 0===o&&(o="");var n,i=e.getComponent("mainGame_startNode"),r=i.pos.y+1,s=i.pos.y-1,a=i.pos.x-1,c=i.pos.x+1;r<=5&&"a"!=o&&((n=this.starAry[i.pos.x][r].getComponent("mainGame_startNode")).type==i.type&&(this.checkTheSame(t,n.pos)||(t.push(n.pos),this.checkSameStart(n,t,"b"))));s>=0&&"b"!=o&&((n=this.starAry[i.pos.x][s].getComponent("mainGame_startNode")).type==i.type&&(this.checkTheSame(t,n.pos)||(t.push(n.pos),this.checkSameStart(n,t,"a"))));a>=0&&"c"!=o&&((n=this.starAry[a][i.pos.y].getComponent("mainGame_startNode")).type==i.type&&(this.checkTheSame(t,n.pos)||(t.push(n.pos),this.checkSameStart(n,t,"d"))));c<=5&&"d"!=o&&((n=this.starAry[c][i.pos.y].getComponent("mainGame_startNode")).type==i.type&&(this.checkTheSame(t,n.pos)||(t.push(n.pos),this.checkSameStart(n,t,"c"))));return t},t.prototype.checkTheSame=function(e,t){for(var o=0;o<e.length;o++)if(e[o].x==t.x&&e[o].y==t.y)return!0;return!1},t.prototype.updateNode=function(e,t,o){var n=cc.moveTo(.2,e);o.runAction(n),o.getComponent("mainGame_startNode").pos=t,this.starAry[t.x][t.y]=o},t.prototype.checkstarNode=function(e){if(e.x>this.oldPostion.x){if(e.x-this.oldPostion.x>l.default.widthMove+100)return e.setPosition(this.oldPostion),void(this.canMove=!1)}else if(this.oldPostion.x-e.x>l.default.widthMove+80)return e.setPosition(this.oldPostion),void(this.canMove=!1);if(e.y>this.oldPostion.y){if(e.y-this.oldPostion.y>l.default.widthMove+80)return e.setPosition(this.oldPostion),void(this.canMove=!1)}else if(this.oldPostion.y-e.y>l.default.widthMove+80)return e.setPosition(this.oldPostion),void(this.canMove=!1)},t.prototype.onButtonEvent=function(e){switch(e.target.name){case"btn_set":return c.showGameSet()}},t.prototype.update=function(e){this.timer.string=l.default.bushu+"/40"},i([a(cc.Label)],t.prototype,"score",void 0),i([a(cc.Label)],t.prototype,"timer",void 0),i([a(cc.Label)],t.prototype,"scoreNuqi",void 0),i([a(cc.Node)],t.prototype,"skillIcon",void 0),i([a(cc.Node)],t.prototype,"gameNode",void 0),i([a(cc.Node)],t.prototype,"result",void 0),i([a(cc.Node)],t.prototype,"myskillItem",void 0),i([a(cc.Node)],t.prototype,"zhezhao",void 0),i([a(cc.Node)],t.prototype,"roleSpine",void 0),i([a(cc.Prefab)],t.prototype,"starNode",void 0),i([a(cc.ProgressBar)],t.prototype,"mylift_ProgressBar",void 0),i([a(cc.ProgressBar)],t.prototype,"nuqi_ProgressBar",void 0),i([a(cc.ProgressBar)],t.prototype,"boss_ProgressBar",void 0),t=i([s],t)}(cc.Component);o.default=m,cc._RF.pop()},{"../Game":"Game","../commom/SpineMap":"SpineMap","../components/Effect":"Effect","../utils/Data":"Data","../utils/NodeHelp":"NodeHelp","../utils/SceneMgr":"SceneMgr","../utils/SoundMgr":"SoundMgr","./mainGameBossSkill":"mainGameBossSkill","./mainGameConfig":"mainGameConfig"}],use_reversed_rotateTo:[function(e,t,o){"use strict";cc._RF.push(t,"7d7a9Pz+EVNhYGB8XU0kVXG","use_reversed_rotateTo"),cc.RotateTo._reverse=!0,cc._RF.pop()},{}],"use_v2.1-2.2.1_cc.Toggle_event":[function(e,t,o){"use strict";cc._RF.push(t,"c538dE6YExPnpzC9MnOWG+D","use_v2.1-2.2.1_cc.Toggle_event"),cc.Toggle&&(cc.Toggle._triggerEventInScript_isChecked=!0),cc._RF.pop()},{}]},{},["Base","Config","Define","Game","I18n","Interface","LangMap","PlotData","PlotMap","RoleIdMap","SceneMap","SmMap","SpineMap","Sys_skillclassify","AFloat","Dialog","Effect","GameConfir","GameSet","Hint","PlotHelp","PlotMgr","TextOut","Update","GirlSmMain","SmConfig","Home","Inroduce","Plot","Role","RoleItem","Shop","ShopItem","ShopItemJian","SkillBox","SkillBox1","SkillBoxItem","SkillBoxItem1","GirlSm","SmGuid","SmPrelude","Stroy","Archive","ArchiveItem","Login","PhotoCollect","mainGame","mainGameBossSkill","mainGameConfig","mainGame_startNode","AES","Data","EventMgr","NodeHelp","SceneMgr","SoundMgr","StatusMgr","use_reversed_rotateTo","use_v2.1-2.2.1_cc.Toggle_event"]);